function Z(l,t=.001){return Math.abs(l)<t}function D(l=0,t=0){return[l,t]}function rt(l){return D(l[0],l[1])}function _(l,t){return l[0]=t[0],l[1]=t[1],l}function at(l,t,n){return l[0]=t[0]+n[0],l[1]=t[1]+n[1],l}function ct(l,t,n){return l[0]=t[0]-n[0],l[1]=t[1]-n[1],l}function J(l,t,n){return l[0]=t[0]*n[0],l[1]=t[1]*n[1],l}function V(l,t,n){return l[0]=t[0]/n[0],l[1]=t[1]/n[1],l}function ft(l,t,n,e){return l[0]=t[0]+e[0]*(n[0]-t[0]),l[1]=t[1]+e[1]*(n[1]-t[1]),l}function ut(l,t,n,e){return l[0]=t[0]-e[0]*(n[0]-t[0]),l[1]=t[1]-e[1]*(n[1]-t[1]),l}function U(l,t,n,e){return l[0]=t[0]*n[0]+e[0],l[1]=t[1]*n[1]+e[1],l}function ht(l,t,n,e){return l[0]=(t[0]-e[0])/n[0],l[1]=(t[1]-e[1])/n[1],l}var q=(l,t,n)=>{let e=-1;for(;t<=n;){let a=t+Math.floor((n-t+1)/2),r=l(a);r<0?(e=a,t=a+1):(r>0||r===0)&&(n=a-1)}return e};var H=l=>{l.preventDefault(),l.stopPropagation()},K="touchgestures:pointerdown",Q="touchgestures:pointermove",tt="touchgestures:pointerup",et="touchgestures:pointerzoom",Mt={listenerElement:null,invertMouseWheel:!1,mouseWheelStep:.1},F=class{constructor(t,n={}){let e={...Mt,...n};this.element=t,this.listenerElement=e.listenerElement!==null?e.listenerElement:t;let a=(i,c)=>this.element.dispatchEvent(new CustomEvent(i,{detail:c})),r=(i,c,f)=>a(K,{originalEvent:i,clientX:c,clientY:f}),g=(i,c,f)=>a(tt,{originalEvent:i,clientX:c,clientY:f}),p=(i,c,f,d)=>a(et,{originalEvent:i,clientX:c,clientY:f,deltaScale:d}),S=(i,c,f,d,M)=>a(Q,{originalEvent:i,clientX:c,clientY:f,movementX:d,movementY:M}),o=null,x=null,s={x:0,y:0},m={x:0,y:0},P=e.invertMouseWheel?-1:1,I=e.mouseWheelStep;this.listeners={touchstart:i=>{let c=i.target.getBoundingClientRect();if(o!==null){let f=i.changedTouches[0];f.identifier!==o&&(x=f.identifier,m.x=f.clientX-c.left,m.y=f.clientY-c.top,g(i,s.x,s.y),r(i,s.x+(m.x-s.x)/2,s.y+(m.y-s.y)/2))}else{let f=i.changedTouches[0];o=f.identifier,s.x=f.clientX-c.left,s.y=f.clientY-c.top,r(i,s.x,s.y)}},touchend:i=>{let c=Array.from(i.changedTouches);if(o!==null&&x!==null){let f=c.find(M=>o===M.identifier),d=c.find(M=>x===M.identifier);g(i,s.x+(m.x-s.x)/2,s.y+(m.y-s.y)/2),f&&d?(o=null,x=null):f&&!d?(o=x,s.x=m.x,s.y=m.y,x=null):!f&&d&&(x=null),o!==null&&r(i,s.x,s.y)}else o!==null&&c.find(d=>o===d.identifier)&&(o=null,g(i,s.x,s.y))},touchmove:i=>{let c=i.target.getBoundingClientRect();if(o!==null&&x!==null){let f={x:s.x,y:s.y},d={x:m.x,y:m.y},M=Array.from(i.changedTouches).find(X=>o===X.identifier),b=Array.from(i.changedTouches).find(X=>x===X.identifier);M&&(f.x=M.clientX-c.left,f.y=M.clientY-c.top),b&&(d.x=b.clientX-c.left,d.y=b.clientY-c.top);let y=m.x-s.x,w=m.y-s.y,O=d.x-f.x,T=d.y-f.y,v=Math.hypot(y,w),Y=Math.hypot(O,T),A=1-v/Y,k={x:s.x+y/2,y:s.y+w/2},L={x:f.x+O/2,y:f.y+T/2};S(i,L.x,L.y,L.x-k.x,L.y-k.y),g(i,L.x,L.y),p(i,L.x,L.y,A),r(i,L.x,L.y),s.x=f.x,s.y=f.y,m.x=d.x,m.y=d.y}else if(o!==null){let f={x:s.x,y:s.y},d=Array.from(i.changedTouches).find(M=>o===M.identifier);if(!d)return;f.x=d.clientX-c.left,f.y=d.clientY-c.top,S(i,f.x,f.y,f.x-s.x,f.y-s.y),s.x=f.x,s.y=f.y}},mousedown:i=>{s.x=i.clientX,s.y=i.clientY,r(i,s.x,s.y)},mouseup:i=>{s.x=i.clientX,s.y=i.clientY,g(i,s.x,s.y)},mousemove:i=>{let c={x:i.clientX,y:i.clientY};S(i,c.x,c.y,c.x-s.x,c.y-s.y),s.x=c.x,s.y=c.y},wheel:i=>{let c=I*(i.deltaY>0?1:-1)*P;p(i,i.clientX,i.clientY,c)}}}enableNativeGestures(){document.removeEventListener("gesturestart",H),document.removeEventListener("gesturechange",H),document.removeEventListener("gestureend",H)}disableNativeGestures(){document.addEventListener("gesturestart",H),document.addEventListener("gesturechange",H),document.addEventListener("gestureend",H)}enableTouchGestures(){this.listenerElement.addEventListener("touchstart",this.listeners.touchstart),document.addEventListener("touchend",this.listeners.touchend),document.addEventListener("touchmove",this.listeners.touchmove)}disableTouchGestures(){this.listenerElement.removeEventListener("touchstart",this.listeners.touchstart),document.removeEventListener("touchend",this.listeners.touchend),document.removeEventListener("touchmove",this.listeners.touchmove)}enableMouseGestures(){this.listenerElement.addEventListener("mousedown",this.listeners.mousedown),document.addEventListener("mouseup",this.listeners.mouseup),document.addEventListener("mousemove",this.listeners.mousemove),this.listenerElement.addEventListener("wheel",this.listeners.wheel),document.addEventListener("mouseleave",this.listeners.mouseup)}disableMouseGestures(){this.listenerElement.removeEventListener("mousedown",this.listeners.mousedown),document.removeEventListener("mouseup",this.listeners.mouseup),document.removeEventListener("mousemove",this.listeners.mousemove),document.removeEventListener("wheel",this.listeners.wheel),document.removeEventListener("mouseleave",this.listeners.mouseup)}};var St=l=>typeof l=="object",Lt=l=>l instanceof Array;function j(l,t){let n={...l,...t};return Object.entries(t).forEach(({0:e,1:a})=>{e in l&&St(a)&&!Lt(a)&&a!==null&&(n[e]=j(l[e],a))}),n}function nt(){return{focus:{points:{innerRadius:l=>l.options.lineWidth*2,outerRadius:l=>l.options.lineWidth*2+l.options.lineWidth},axes:{x:{color:"rgba(0,0,0,0.1)",lineWidth:1},y:{color:"rgba(0,0,0,0.1)",lineWidth:1}}},color:{border:"rgba(0,0,0,0)",background:"#000000",text:"#ffffff"},shadow:{offsetX:0,offsetY:15,blur:5,color:"rgba(0,0,0,0.2)"},borderRadius:{leftTop:5,rightTop:5,leftBottom:5,rightBottom:5},viewportPadding:{left:15,right:15,top:15,bottom:15},padding:{left:25,right:10,top:5,bottom:5},mark:{offsetLeft:15,offsetTop:15,innerRadius:0,outerRadius:3},splitter:{height:5},unitInvisibleHints:!0,maxNumIterations:20}}var Rt=nt();function dt(l,t,n,e,a,r){let{fontFamily:g,fontSize:p}=a,{hintText:S,settings:o}=a.hints,x=j(Rt,o),{focus:s,borderRadius:m,padding:P,mark:I,splitter:i}=x,{innerRadius:c,outerRadius:f}=s.points,d=D(),{transform:M}=r,b=[],y=n.pixelRatio,w={...I};w.offsetLeft*=y,w.offsetTop*=y,w.innerRadius*=y,w.outerRadius*=y;let O={...P};O.left*=y,O.top*=y,O.right*=y,O.bottom*=y;let T={...i};T.height*=y;let v=p*y;l.font=`${v}px/1 ${g}`;for(let Y=0,A=e.length;Y<A;Y++){let k=e[Y],L=k.focusPoint;if(L){M(d,L);let X=S(L[0],L[1],k,a,L.source).split(`
`),C=0,u=0,h=0;for(let N=0,B=X.length;N<B;N++){let W=l.measureText(X[N]),G=W.width;C<G&&(C=G),u+=v;let z=-Math.abs(W.actualBoundingBoxAscent),yt=Math.abs(W.actualBoundingBoxDescent);h=v-(yt-z)}u+=O.top+O.bottom+h,C+=O.left+O.right;let E=d[0]+20,R=d[1]-u/2;b.push({focusPoints:[{x:d[0],y:d[1],innerRadius:c(k)*y,outerRadius:f(k)*y,dataset:k}],left:E,top:R,right:E+C,bottom:R+u,correction:h,texts:[{offsetLeft:O.left,offsetTop:O.top,contents:X}],padding:O,marks:[{...w,dataset:k}]})}}return M(d,t),{ctx:l,focus:{origin:t,x:d[0],y:d[1]},viewport:{...n,backgroundColor:a.backgroundColor},settings:j(x,{font:{family:g,size:v},borderRadius:m?[Math.round(m.leftTop*y),Math.round(m.rightTop*y),Math.round(m.rightBottom*y),Math.round(m.leftBottom*y)]:null,splitter:T}),helpers:r,list:b}}var mt=l=>{let{list:t,settings:n,viewport:{width:e,height:a,pixelRatio:r},helpers:{isIntersects:g}}=l,{viewportPadding:p,splitter:{height:S}}=n,o={left:p.left*r,right:e-p.right*r,top:p.top*r,bottom:a-p.bottom*r},x=[...t].sort((P,I)=>P.focusPoints[P.focusPoints.length-1].y-I.focusPoints[0].y),s=!0,m=0;for(;s;){m++,s=!1;for(let P=0,I=x.length;P<I;P++){let i=x[P];if(i!==null){for(let c=P+1;c<I;c++){let f=x[c];if(f!==null&&g(i,f)){let d=i.bottom-i.top-i.padding.bottom-f.padding.top-i.correction+S;for(let M=0,b=f.texts.length;M<b;M++)f.texts[M].offsetTop+=d;for(let M=0,b=f.marks.length;M<b;M++)f.marks[M].offsetTop+=d;i.right=Math.max(i.right,i.left+(f.right-f.left)),i.bottom+=f.bottom-f.top-i.padding.bottom-f.padding.top-i.correction+S,i.texts=i.texts.concat(f.texts),i.focusPoints=i.focusPoints.concat(f.focusPoints),i.marks=i.marks.concat(f.marks),x[c]=null,s=!0}}x[P]=i}}if(!n.unitInvisibleHints)for(let P=0,I=x.length;P<I;P++){let i=x[P];i!==null&&(i.right<o.left||i.left>o.right||i.bottom<o.top||i.top>o.bottom)&&(x[P]=null,s=!0)}x=x.filter(P=>P);for(let P=0,I=x.length;P<I;P++){let i=x[P];if(i.left<o.left){let c=o.left-i.left;i.left+=c,i.right+=c,s=!0}else if(i.right>o.right){let c=i.right-o.right;i.left-=c,i.right-=c,s=!0}if(i.top<o.top){let c=o.top-i.top;i.top+=c,i.bottom+=c,s=!0}else if(i.bottom>o.bottom){let c=i.bottom-o.bottom;i.top-=c,i.bottom-=c,s=!0}}if(x.length<=1||m>=n.maxNumIterations)break}return{...l,list:x}},xt=l=>{let{ctx:t,list:n,settings:{font:e,color:a,shadow:r,borderRadius:g,focus:{axes:p}},viewport:{width:S,height:o,pixelRatio:x,backgroundColor:s}}=l;for(let c=0,f=n.length;c<f;c++){let d=n[c],{left:M,top:b,right:y,bottom:w}=d;d.rect={left:Math.round(M),top:Math.round(b),width:Math.round(y-M),height:Math.round(w-b)}}if(p.y){let{color:c,lineWidth:f}=p.y;t.fillStyle=c;for(let d=0,M=n.length;d<M;d++){let{focusPoints:b}=n[d];for(let y=0,w=b.length;y<w;y++){let{y:O}=b[y];t.fillRect(0,O,S,Math.round(f*x))}}}if(p.x){let{color:c,lineWidth:f}=p.x;t.fillStyle=c,t.fillRect(l.focus.x,0,Math.round(f*x),o)}if(r){let{offsetX:c,offsetY:f,blur:d,color:M}=r;t.fillStyle="rgb(255,255,255)",t.shadowColor=M,t.shadowOffsetX=c,t.shadowOffsetY=f,t.shadowBlur=d;for(let b=0,y=n.length;b<y;b++){let{left:w,top:O,width:T,height:v}=n[b].rect;g?(t.beginPath(),t.roundRect(w,O,T,v,g),t.fill()):t.fillRect(w,O,T,v)}t.shadowColor="transparent"}for(let c=0,f=n.length;c<f;c++){let{focusPoints:d}=n[c];for(let M=0,b=d.length;M<b;M++){let{x:y,y:w,innerRadius:O,outerRadius:T,dataset:{options:{lineColor:v}}}=d[M],Y=Math.round(y),A=Math.round(w);t.fillStyle=v.toString(),t.beginPath(),t.arc(Y,A,Math.round(T),0,2*Math.PI,!1),t.fill(),t.fillStyle=s,t.beginPath(),t.arc(Y,A,Math.round(O),0,2*Math.PI,!1),t.fill()}}let{border:m,background:P,text:I}=a,i=e.size;t.font=`${Math.round(i)}px/1 ${e.family}`;for(let c=0,f=n.length;c<f;c++){let{rect:{left:d,top:M,width:b,height:y},texts:w,marks:O}=n[c];t.strokeStyle=m,t.fillStyle=P,g?(t.beginPath(),t.roundRect(d,M,b,y,g),t.fill(),t.stroke()):t.fillRect(d,M,b,y),t.fillStyle=I;for(let T=0,v=w.length;T<v;T++){let{offsetLeft:Y,offsetTop:A,contents:k}=w[T],L=Math.round(Y+d),X=A+M;for(let C=0,u=k.length;C<u;C++)t.fillText(k[C],L,Math.round(X+i)),X+=i}for(let T=0,v=O.length;T<v;T++){let{offsetLeft:Y,offsetTop:A,innerRadius:k,outerRadius:L,dataset:{options:{lineColor:X}}}=O[T],C=Math.round(Y+d),u=Math.round(A+M);t.fillStyle=X.toString(),t.beginPath(),t.arc(C,u,L,0,2*Math.PI,!1),t.fill(),t.fillStyle=s,t.beginPath(),t.arc(C,u,k,0,2*Math.PI,!1),t.fill()}}};function it(){return{color:{border:"#eeeeee",background:"#ffffff",text:"#000000"},padding:{left:5,right:5,top:5,bottom:5},itemPadding:{left:25,right:10,top:5,bottom:5},mark:{offsetLeft:15,offsetTop:15,innerRadius:0,outerRadius:3}}}var Pt=it();function gt(l,t,n,e){let{legendText:a,settings:r}=e.legends,g=j(Pt,r),{itemPadding:p,padding:S,mark:o}=g,{fontFamily:x,fontSize:s}=e,m=[],P=0,I=0,i=t.pixelRatio,c=s*i,f={...o};f.offsetLeft*=i,f.offsetTop*=i,f.innerRadius*=i,f.outerRadius*=i;let d={...S};d.left*=i,d.top*=i,d.right*=i,d.bottom*=i;let M={...p};M.left*=i,M.top*=i,M.right*=i,M.bottom*=i,l.font=`${c}px/1 ${x}`;let b=[...Object.values(n.reduce((L,X,C)=>{let u=X.options.groupId===null?C:X.options.groupId;return u in L||(L[u]={dataset:X,i:C}),L},{}))].sort((L,X)=>L.i-X.i);for(let L=0,X=b.length;L<X;L++){let C=b[L].dataset,u=a(C,e);if(u){let h=l.measureText(u),E=h.width+M.left+M.right*i,R=-Math.abs(h.actualBoundingBoxAscent),N=Math.abs(h.actualBoundingBoxDescent);I=Math.max(I,c-(N-R)),m.push({text:{content:u,offsetLeft:M.left,offsetTop:M.top},mark:f,lineColor:C.options.lineColor,width:E,left:0,top:0}),P<E&&(P=E)}}let y=t.width-d.left-d.right,w=Math.floor(y/P),O=0,T=0,v=c+M.top+M.bottom+I;for(let L=0,X=m.length;L<X;L++){let C=m[L],u=L%w,h=Math.floor(L/w);O<u&&(O=u),T<h&&(T=h),C.left=u*P,C.top=h*v}let Y=(T+1)*v+d.top+d.bottom,A=d.left+(y-(O+1)*P)/2,k=t.height-Y+d.top;for(let L=0,X=m.length;L<X;L++){let C=m[L];C.left+=A,C.top+=k}return t.clip(0,0,t.width,t.height-Y),{ctx:l,area:{left:0,right:t.width,top:t.height-Y,bottom:t.height},viewport:{...t,backgroundColor:e.backgroundColor},settings:j(g,{font:{family:x,size:c}}),list:m}}function pt(l){let{ctx:t,area:n,settings:{font:e,color:a},viewport:{pixelRatio:r,backgroundColor:g},list:p}=l;if(a.background){let o=Math.round(n.left),x=Math.round(n.top),s=Math.round(n.right),m=Math.round(n.bottom);t.fillStyle=a.background,t.fillRect(o,x,s-o,m-x),a.border&&(t.fillStyle=a.border,t.fillRect(o,x,s-o,Math.round(1*r)))}let S=e.size;t.font=`${Math.round(S)}px/1 ${e.family}`;for(let o=0,x=p.length;o<x;o++){let{left:s,top:m,text:P,mark:I,lineColor:i}=p[o];t.fillStyle=a.text;{let{offsetLeft:c,offsetTop:f,content:d}=P;c+=s,f+=m,t.fillText(d,Math.round(c),Math.round(f+e.size))}{let{offsetLeft:c,offsetTop:f,innerRadius:d,outerRadius:M}=I,b=Math.round(c+s),y=Math.round(f+m);t.fillStyle=i.toString(),t.beginPath(),t.arc(b,y,Math.round(M),0,2*Math.PI,!1),t.fill(),t.fillStyle=g,t.beginPath(),t.arc(b,y,Math.round(d),0,2*Math.PI,!1),t.fill()}}}function $(l,t){return l.bottom>t.top&&l.right>t.left&&l.top<t.bottom&&l.left<t.right}function bt(l){let t=l.length;for(let n=0;n<t;n++)for(let e=0;e<t;e++)if(n!==e&&$(l[n].boundingRect,l[e].boundingRect))return!0;return!1}var wt={xCanvasStep:25,yCanvasStep:25,xAxisStep:1,yAxisStep:1,xOffset:0,yOffset:0,xScale:1,yScale:1,xAxisSubdivisions:10,yAxisSubdivisions:10,lineWidth:1,pointSize:0,fontSize:15,fontFamily:"monospace",xAxisLabelXOffset:0,xAxisLabelYOffset:0,xAxisLabelDynamicPosition:!0,xAxisLabelSpacing:15,xAxisLabelFormat:l=>l.toFixed(4),xAxisLabelJoiningStep:5,xAxisLabelMarkOffset:-2,xAxisLabelMarkSize:4,xAxisLabelDisplayZero:!0,xAxisLabelEnable:!0,yAxisLabelXOffset:0,yAxisLabelYOffset:0,yAxisLabelDynamicPosition:!0,yAxisLabelSpacing:0,yAxisLabelFormat:l=>l.toFixed(4),yAxisLabelJoiningStep:5,yAxisLabelMarkOffset:-2,yAxisLabelMarkSize:4,yAxisLabelDisplayZero:!0,yAxisLabelEnable:!0,backgroundColor:"#ffffff",gridColor:"rgba(0,0,0,0.1)",axesColor:"rgba(0,0,0,0.5)",userTranslateX:!0,userTranslateY:!0,userScaleX:!0,userScaleY:!0,canvasRatio:1,canvasPixelRatio:1,clearFrame:!1,hints:{settings:nt(),hintText:(l,t,n,e,a)=>`X: ${e.xAxisLabelFormat(l)}
Y: ${e.yAxisLabelFormat(t)}`,createHints:dt,displaceHints:mt,renderHints:xt},legends:{settings:it(),legendText:(l,t)=>`${l.legend}`,createLegends:gt,renderLegends:pt},cursorPointer:"pointer",cursorGrabbing:"grabbing",bindEventHandlers:!0,invertMouseWheel:!1,mouseWheelStep:.1,afterRepaint:null},st=class{constructor(t,n={}){this.options=n=j(wt,n),this.elCanvas=t,this.ctx=t.getContext("2d"),this.scale=D(n.xScale,n.yScale),this.translate=D(n.xOffset,n.yOffset),this.focusPoint=D(0,0),this.datasets=[],this.currentXBounds=D(),t.style.cursor=n.cursorPointer;let e={down:!1,pt0:D(0,0),pt:D(0,0),delta:D(0,0)},a=(r,g)=>{let{clientX:p,clientY:S}=g,{left:o,right:x,top:s,bottom:m}=t.getBoundingClientRect();return r[0]=(p-o)/n.canvasRatio,r[1]=(S-s)/n.canvasRatio,o<=p&&p<=x&&s<=S&&S<=m};this.isListening=!1,this.listeners={},this.listeners[K]=r=>{t.style.cursor=n.cursorGrabbing,r.detail.originalEvent.preventDefault(),e.down=!0,a(e.pt0,r.detail)},this.listeners[tt]=r=>{e.down=!1,t.style.cursor=n.cursorPointer},this.listeners[Q]=r=>{let g=a(e.pt,r.detail);if(e.down){ct(e.delta,e.pt,e.pt0),_(e.pt0,e.pt);let p=D(n.userTranslateX?e.delta[0]:0,n.userTranslateY?e.delta[1]:0);this.move(p),this.repaint()}else if(g){let p=D();ht(p,e.pt,D(n.xCanvasStep,n.yCanvasStep),this.translate),p[1]=-p[1],J(p,p,D(n.xAxisStep,n.yAxisStep)),V(p,p,this.scale),this.computeFocusPoints(p),this.repaint()}},this.listeners[et]=r=>{r.detail.originalEvent.preventDefault();let g=r.detail.deltaScale,p=n.userScaleX===!0||typeof n.userScaleX=="function"&&n.userScaleX(r),S=n.userScaleY===!0||typeof n.userScaleY=="function"&&n.userScaleY(r),o=D(p?g:0,S?g:0);a(e.pt,r.detail),this.zoomAroundPoint(o,e.pt),this.repaint()},this.touchGestures=new F(t,{invertMouseWheel:n.invertMouseWheel,mouseWheelStep:n.mouseWheelStep}),n.bindEventHandlers&&this.bind()}computeFocusPoints(t){this.datasets.forEach(n=>{let{source:e}=n,a=e.length,r=q(p=>e.at(p)[0]-t[0],0,a-1),g=r+1;if(r>=0&&g<a){let p=D(),S=e.at(r),o=e.at(g),x=(t[0]-S[0])/(o[0]-S[0]),s=D(x,n.options.isStepped?0:x);ft(p,S,o,s),p.source={i0:r,i1:g,s},n.focusPoint=p}else n.focusPoint=null}),_(this.focusPoint,t)}bind(){if(!this.isListening){for(let t in this.listeners)this.elCanvas.addEventListener(t,this.listeners[t]);this.touchGestures.enableTouchGestures(),this.touchGestures.enableMouseGestures(),this.isListening=!0}}unbind(){if(this.isListening){for(let t in this.listeners)this.elCanvas.removeEventListener(t,this.listeners[t]);this.touchGestures.disableTouchGestures(),this.touchGestures.disableMouseGestures(),this.isListening=!1}}getViewportXBounds(){return rt(this.currentXBounds)}fitView(t,n=!0){let e=this.elCanvas.width,a=this.elCanvas.height;if(e<=0||a<=0||Math.abs(t.width)<=0||Math.abs(t.height)<=0)return!1;let r=this.options;r.legends&&r.legends.createLegends(this.ctx,{width:e,height:a,pixelRatio:r.canvasRatio*r.canvasPixelRatio,clip(x,s,m,P){e=m-x,a=P-s}},this.datasets,r,{isIntersects:$});let g=new DOMRect(t.x,-t.y-t.height,t.width,t.height),p=r.canvasRatio*r.canvasPixelRatio,S=D(r.xCanvasStep,r.yCanvasStep),o=D(r.xAxisStep,r.yAxisStep);if(e=e/p/S[0]*o[0],a=a/p/S[1]*o[1],this.scale[0]=e/g.width,this.scale[1]=a/g.height,n&&(this.scale[1]>this.scale[0]?this.scale[1]=this.scale[0]:this.scale[0]=this.scale[1]),this.translate[0]=-(g.x/o[0])*S[0]*this.scale[0],this.translate[1]=-(g.y/o[1])*S[1]*this.scale[1],n){let x=(e/this.scale[0]-g.width)/2,s=(a/this.scale[1]-g.height)/2;this.translate[0]+=x*S[0]*this.scale[0]/o[0],this.translate[1]+=s*S[1]*this.scale[1]/o[1]}return!0}fitViewAuto(t=!0){this.fitView(this.getBoundingRect(null,0,null,0),t),this.repaint()}getExtremes(t=null,n=null,e=null,a=null){let r=t,g=e,p=n,S=a;return this.datasets.forEach(o=>{let x=o.getExtremes();(r===null||r>x.minX)&&(r=x.minX),(g===null||g<x.maxX)&&(g=x.maxX),(p===null||p>x.minY)&&(p=x.minY),(S===null||S<x.maxY)&&(S=x.maxY)}),{minX:r,minY:p,maxX:g,maxY:S}}getBoundingRect(t=null,n=null,e=null,a=null){let{minX:r,minY:g,maxX:p,maxY:S}=this.getExtremes(),o=new DOMRect(r,g,p-r,S-g);return o.minX=r,o.minY=g,o.maxX=p,o.maxY=S,o}move(t){at(this.translate,this.translate,t)}zoomAroundPoint(t,n){let e=this.translate,a=this.scale;ut(e,e,n,t),U(a,a,t,a)}repaint(){let t,n,e=this.options,a=this.ctx,r=this.elCanvas.width,g=this.elCanvas.height,p=this.scale,S=this.datasets;if(r<=0||g<=0||p[0]===0||p[1]===0)return;let o=e.canvasRatio*e.canvasPixelRatio,x=D(e.xCanvasStep*o,e.yCanvasStep*o),s=D(this.translate[0]*o,this.translate[1]*o),m=D(x[0]*p[0],x[1]*p[1]),P=D(e.xAxisStep,e.yAxisStep),I=D(1,1),i=D(e.xAxisSubdivisions,e.yAxisSubdivisions);for(;m[0]>x[0]*i[0];)m[0]/=i[0],I[0]/=i[0];for(;m[1]>x[1]*i[1];)m[1]/=i[1],I[1]/=i[1];for(;m[0]<x[0];)m[0]*=i[0],I[0]*=i[0];for(;m[1]<x[1];)m[1]*=i[1],I[1]*=i[1];let c=s[0]-(Math.floor(s[0]/m[0])+(s[0]>0?1:0))*m[0],f=s[1]-(Math.floor(s[1]/m[1])+(s[1]>0?1:0))*m[1],d=(b,y)=>{J(b,y,x),V(b,b,P),b[1]=-b[1],U(b,b,p,s)};e.clearFrame&&a.clearRect(0,0,r,g),a.fillStyle=e.backgroundColor,a.fillRect(0,0,r,g);let M=null;if(e.legends){let{createLegends:b,renderLegends:y}=e.legends,w=b(a,{width:r,height:g,pixelRatio:o,clip(O,T,v,Y){r=v-O,g=Y-T,M=new Path2D,M.rect(O,T,r,g)}},S,e,{isIntersects:$});y(w)}M&&(a.save(),a.clip(M)),a.fillStyle=e.gridColor;for(let b=c;b<=r;b+=m[0])a.fillRect(b,0,1*o,g);for(let b=f;b<=g;b+=m[1])a.fillRect(0,b,r,1*o);a.fillStyle=e.axesColor,a.fillRect(s[0],0,1*o,g),a.fillRect(0,s[1],r,1*o);for(let b=0,y=S.length;b<y;b++){let w=S[b],{source:O,tree:T}=w;if(O.length>1){a.strokeStyle=w.options.lineColor,a.lineWidth=w.options.lineWidth*o;let v=D(),Y=D(),A=(u,h,E)=>{if(d(Y,[h.maxX,h.maxY]),Y[0]<0||(d(v,[h.minX,h.minY]),v[0]>r))return;let R=Math.round(v[0]),N=Math.round(Y[0]);if(R===N)u.beginPath(),u.setLineDash(w.options.lineDash.map(B=>B*o)),u.moveTo(R,v[1]),u.lineTo(N,Y[1]),u.stroke();else if(h.left&&h.right)A(u,h.left,E),A(u,h.right,E);else{u.beginPath(),u.setLineDash(w.options.lineDash.map(B=>B*o)),d(v,E.at(h.s)),u.moveTo(v[0],v[1]);for(let B=h.s+1;B<=h.e;B++)d(v,E.at(B)),u.lineTo(v[0],v[1]);u.stroke()}u.setLineDash([])},k=(u,h,E)=>{if(d(Y,[h.maxX,h.maxY]),Y[0]<0||(d(v,[h.minX,h.minY]),v[0]>r))return;let R=Math.round(v[0]),N=Math.round(Y[0]);if(R===N)u.beginPath(),u.setLineDash(w.options.lineDash.map(B=>B*o)),u.moveTo(R,v[1]),u.lineTo(N,Y[1]),u.stroke();else if(h.left&&h.right)k(u,h.left,E),k(u,h.right,E);else{u.beginPath(),u.setLineDash(w.options.lineDash.map(W=>W*o)),d(v,E.at(h.s)),u.moveTo(v[0],v[1]);let B=v[1];for(let W=h.s+1;W<=h.e;W++)d(v,E.at(W)),u.lineTo(v[0],B),u.lineTo(v[0],v[1]),B=v[1];u.stroke()}u.setLineDash([])},L=2*Math.PI,X=(u,h,E,R)=>{if(d(Y,[h.maxX,h.maxY]),Y[0]<0||(d(v,[h.minX,h.minY]),v[0]>r))return;let N=Math.round(v[0]),B=Math.round(Y[0]);if(N===B)u.beginPath(),u.arc(N,v[1],R,0,L,!1),u.fill(),u.beginPath(),u.arc(B,Y[1],R,0,L,!1),u.stroke();else if(h.left&&h.right)X(u,h.left,E,R),X(u,h.right,E,R);else{for(let W=h.s;W<=h.e;W++)d(v,E.at(W)),u.beginPath(),u.arc(v[0],v[1],R,0,L,!1),u.fill();u.stroke()}};w.options.isStepped?k(a,T,O):A(a,T,O);let C=w.options.pointRadius;C>0&&(a.fillStyle=w.options.lineColor,X(a,T,O,C*o))}}if(e.xAxisLabelEnable||e.yAxisLabelEnable){let b=e.fontSize*o;if(a.font=`${b}px/1 ${e.fontFamily}`,a.fillStyle=e.axesColor,this.currentXBounds[0]=(0-s[0])/m[0]*I[0]*P[0],this.currentXBounds[1]=(r-s[0])/m[0]*I[0]*P[0],e.xAxisLabelEnable){let y=e.xAxisLabelXOffset*o,w=e.xAxisLabelYOffset*o,O=e.xAxisLabelMarkOffset*o,T=e.xAxisLabelMarkSize*o,v=e.xAxisLabelSpacing*o,Y=v/2,A=[],k=!1,L=!1;for(let u=c;u<=r;u+=m[0]){let h=u-s[0],E=Math.round(h/m[0]),N=E*I[0]*P[0],B=e.xAxisLabelFormat(N),W=a.measureText(B),G={i:E,gridX:u,text:B,textMetrics:W,x:u-W.width/2+y,y:s[1]+b+w};A.push(G),G.y-b-w<0&&(k=!0),G.y+w>g&&(L=!0)}for(let u=0,h=A.length;u<h;u++){let E=A[u];n=E.y,e.xAxisLabelDynamicPosition&&(n=k?b+w:L?g-w:n);let R=new DOMRect(E.x-Y,n-b,E.textMetrics.width+v,b);E.y=n,E.boundingRect=R}let X=e.xAxisLabelJoiningStep,C=A;for(;bt(A);)A=C.filter(u=>Z(Math.abs(u.i)%X)),X+=e.xAxisLabelJoiningStep;for(let u=0,h=A.length;u<h;u++){let E=A[u];!e.xAxisLabelDisplayZero&&E.i===0||(a.fillRect(E.gridX,s[1]+O,o,T),a.fillText(E.text,E.x,E.y))}}if(e.yAxisLabelEnable){let y=e.yAxisLabelXOffset*o,w=e.yAxisLabelYOffset*o,O=e.yAxisLabelMarkOffset*o,T=e.yAxisLabelMarkSize*o,v=e.yAxisLabelSpacing*o,Y=v/2,A=[],k=0,L=!1,X=!1;for(let h=f;h<=g;h+=m[1]){let E=s[1]-h,R=Math.round(E/m[1]),B=R*I[1]*P[1],W=e.yAxisLabelFormat(B),G=a.measureText(W),z={i:R,gridY:h,text:W,textMetrics:G,x:s[0]-G.width+y,y:h+b/2+w};A.push(z),k<G.width&&(k=G.width),z.x+y<0&&(L=!0),z.x+z.textMetrics.width-y>r&&(X=!0)}for(let h=0,E=A.length;h<E;h++){let R=A[h];t=R.x,e.yAxisLabelDynamicPosition&&(t=L?k-R.textMetrics.width-y:X?r-R.textMetrics.width+y:t);let N=new DOMRect(t,R.y-b-Y,R.textMetrics.width,b+v);R.x=t,R.boundingRect=N}let C=e.yAxisLabelJoiningStep,u=A;for(;bt(A);)A=u.filter(h=>Z(Math.abs(h.i)%C)),C+=e.yAxisLabelJoiningStep;A=A.filter(h=>h.boundingRect.bottom>0&&h.boundingRect.top<g),k=0,L=!1,X=!1;for(let h=0,E=A.length;h<E;h++){let R=A[h];R.x=s[0]-R.textMetrics.width+y,k<R.textMetrics.width&&(k=R.textMetrics.width),R.x+y<0&&(L=!0),R.x+R.textMetrics.width-y>r&&(X=!0)}for(let h=0,E=A.length;h<E;h++){let R=A[h];t=R.x,e.yAxisLabelDynamicPosition&&(t=L?k-R.textMetrics.width-y:X?r-R.textMetrics.width+y:t),R.x=t}for(let h=0,E=A.length;h<E;h++){let R=A[h];!e.yAxisLabelDisplayZero&&R.i===0||(a.fillRect(s[0]+O,R.gridY,T,o),a.fillText(R.text,R.x,R.y))}}}if(e.hints){let{createHints:b,displaceHints:y,renderHints:w}=e.hints,O=b(a,this.focusPoint,{width:r,height:g,pixelRatio:o},S,e,{transform:d,isIntersects:$});O=y(O),w(O)}M&&a.restore(),e.afterRepaint&&e.afterRepaint()}},Et=st;var ot=(l,t,n,e)=>{let a=n-t<=e,[r,g]=l.at(t),[p,S]=l.at(n),o,x;if(a)for(let s=t;s<=n;s++){let m=l.at(s)[1];g>m&&(g=m),S<m&&(S=m)}else{let s=Math.floor((n-t)/2),m=t+s;o=ot(l,t,m,e),x=ot(l,m,n,e),g=Math.min(o.minY,x.minY),S=Math.max(o.maxY,x.maxY)}return{s:t,e:n,minX:r,minY:g,maxX:p,maxY:S,left:o,right:x}},lt=class{constructor(t="",n={}){if("groupId"in n||(n.groupId=null),!("lineColor"in n)){let e=()=>Math.round(Math.random()*256);n.lineColor=`rgb(${e()},${e()},${e()})`}"isStepped"in n||(n.isStepped=!1),"lineWidth"in n||(n.lineWidth=1),"lineDash"in n||(n.lineDash=[]),"pointRadius"in n||(n.pointRadius=0),this.legend=t,this.options=n}compile(t,n){this.source=t,this.rebuild(n)}rebuild(t=100){let n=this.source,e=n.length;this.tree=e>0?ot(n,0,e-1,t):null}getExtremes(t=null,n=null,e=null,a=null){let r=t,g=e,p=n,S=a,{source:o}=this;for(let x=0,s=o.length;x<s;x++){let[m,P]=o.at(x);(r===null||r>m)&&(r=m),(g===null||g<m)&&(g=m),(p===null||p>P)&&(p=P),(S===null||S<P)&&(S=P)}return{minX:r,minY:p,maxX:g,maxY:S}}getBoundingRect(){let{minX:t,minY:n,maxX:e,maxY:a}=this.getExtremes(),r=new DOMRect(t,n,e-t,a-n);return r.minX=t,r.minY=n,r.maxX=e,r.maxY=a,r}},Ot=lt;export{Et as Chart,Ot as Dataset};
//# sourceMappingURL=littlechart.min.js.map
