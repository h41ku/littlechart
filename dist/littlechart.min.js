function $(o,t=.001){return Math.abs(o)<t}function D(o=0,t=0){return[o,t]}function nt(o){return D(o[0],o[1])}function Z(o,t){return o[0]=t[0],o[1]=t[1],o}function st(o,t,i){return o[0]=t[0]+i[0],o[1]=t[1]+i[1],o}function ot(o,t,i){return o[0]=t[0]-i[0],o[1]=t[1]-i[1],o}function J(o,t,i){return o[0]=t[0]*i[0],o[1]=t[1]*i[1],o}function U(o,t,i){return o[0]=t[0]/i[0],o[1]=t[1]/i[1],o}function lt(o,t,i,e){return o[0]=t[0]+e[0]*(i[0]-t[0]),o[1]=t[1]+e[1]*(i[1]-t[1]),o}function rt(o,t,i,e){return o[0]=t[0]-e[0]*(i[0]-t[0]),o[1]=t[1]-e[1]*(i[1]-t[1]),o}function q(o,t,i,e){return o[0]=t[0]*i[0]+e[0],o[1]=t[1]*i[1]+e[1],o}function at(o,t,i,e){return o[0]=(t[0]-e[0])/i[0],o[1]=(t[1]-e[1])/i[1],o}var ct=(o,t,i,e)=>{let f=-1;for(;t<=i;){let r=t+Math.floor((i-t+1)/2),d=o(r);d<e?(f=r,t=r+1):(d>e||d===e)&&(i=r-1)}return f};var H=o=>{o.preventDefault(),o.stopPropagation(),console.log("drop",o.type)},ft="sim:pointerdown",ut="sim:pointermove",ht="sim:pointerup",dt="sim:pointerzoom",St={listenerElement:null,invertMouseWheel:!1,mouseWheelStep:.1},z=class{constructor(t,i={}){let e={...St,...i};this.element=t,this.listenerElement=e.listenerElement!==null?e.listenerElement:t;let f=(n,a)=>this.element.dispatchEvent(new CustomEvent(n,{detail:a})),r=(n,a,p)=>f(ft,{originalEvent:n,clientX:a,clientY:p}),d=(n,a,p)=>f(ht,{originalEvent:n,clientX:a,clientY:p}),y=(n,a,p,c)=>f(dt,{originalEvent:n,clientX:a,clientY:p,deltaScale:c}),L=(n,a,p,c,g)=>f(ut,{originalEvent:n,clientX:a,clientY:p,movementX:c,movementY:g}),l=null,x=null,s={x:0,y:0},m={x:0,y:0},E=e.invertMouseWheel?-1:1,C=e.mouseWheelStep;this.listeners={touchstart:n=>{let a,p=n.target.getBoundingClientRect();if(l!==null){let c=n.changedTouches[0];if(c.identifier!==l){x=c.identifier,m.x=c.clientX-p.left,m.y=c.clientY-p.top;let g;g=d(n,s.x,s.y),g===!1&&(a=!1),g=r(n,s.x+(m.x-s.x)/2,s.y+(m.y-s.y)/2),g===!1&&(a=!1)}}else{let c=n.changedTouches[0];l=c.identifier,s.x=c.clientX-p.left,s.y=c.clientY-p.top;let g;g=r(n,s.x,s.y),g===!1&&(a=!1)}return a===!1&&(n.stopPropagation(),n.preventDefault()),a},touchend:n=>{let a,p=Array.from(n.changedTouches);if(l!==null&&x!==null){let c=p.find(M=>l===M.identifier),g=p.find(M=>x===M.identifier),b;b=d(n,s.x+(m.x-s.x)/2,s.y+(m.y-s.y)/2),b===!1&&(a=!1),c&&g?(l=null,x=null):c&&!g?(l=x,s.x=m.x,s.y=m.y,x=null):!c&&g&&(x=null),l!==null&&(b=r(n,s.x,s.y),b===!1&&(a=!1))}else if(l!==null&&p.find(g=>l===g.identifier)){l=null;let g;g=d(n,s.x,s.y),g===!1&&(a=!1)}return a===!1&&(n.stopPropagation(),n.preventDefault()),a},touchmove:n=>{let a,p=n.target.getBoundingClientRect();if(l!==null&&x!==null){let c={x:s.x,y:s.y},g={x:m.x,y:m.y},b=Array.from(n.changedTouches).find(u=>l===u.identifier),M=Array.from(n.changedTouches).find(u=>x===u.identifier);b&&(c.x=b.clientX-p.left,c.y=b.clientY-p.top),M&&(g.x=M.clientX-p.left,g.y=M.clientY-p.top);let R=m.x-s.x,A=m.y-s.y,k=g.x-c.x,S=g.y-c.y,Y=Math.hypot(R,A),O=Math.hypot(k,S),N=1-Y/O,P={x:s.x+R/2,y:s.y+A/2},T={x:c.x+k/2,y:c.y+S/2},X;X=L(n,T.x,T.y,T.x-P.x,T.y-P.y),X===!1&&(a=!1),X=d(n,T.x,T.y),X===!1&&(a=!1),X=y(n,T.x,T.y,N),X===!1&&(a=!1),X=r(n,T.x,T.y),X===!1&&(a=!1),s.x=c.x,s.y=c.y,m.x=g.x,m.y=g.y}else if(l!==null){let c={x:s.x,y:s.y},g=Array.from(n.changedTouches).find(M=>l===M.identifier);if(!g)return;c.x=g.clientX-p.left,c.y=g.clientY-p.top;let b;b=L(n,c.x,c.y,c.x-s.x,c.y-s.y),b===!1&&(a=!1),s.x=c.x,s.y=c.y}return a===!1&&(n.stopPropagation(),n.preventDefault()),a},mousedown:n=>{s.x=n.clientX,s.y=n.clientY;let a=r(n,s.x,s.y);return a===!1&&(n.stopPropagation(),n.preventDefault()),a},mouseup:n=>{s.x=n.clientX,s.y=n.clientY;let a=d(n,s.x,s.y);return a===!1&&(n.stopPropagation(),n.preventDefault()),a},mousemove:n=>{let a={x:n.clientX,y:n.clientY},p=L(n,a.x,a.y,a.x-s.x,a.y-s.y);return s.x=a.x,s.y=a.y,p===!1&&(n.stopPropagation(),n.preventDefault()),p},wheel:n=>{let a=C*(n.deltaY>0?1:-1)*E,p=y(n,n.clientX,n.clientY,a);return p===!1&&(n.stopPropagation(),n.preventDefault()),p}}}enableNativeGestures(){document.removeEventListener("gesturestart",H),document.removeEventListener("gesturechange",H),document.removeEventListener("gestureend",H)}disableNativeGestures(){document.addEventListener("gesturestart",H),document.addEventListener("gesturechange",H),document.addEventListener("gestureend",H)}enableTouchGestures(){this.listenerElement.addEventListener("touchstart",this.listeners.touchstart),document.addEventListener("touchend",this.listeners.touchend),document.addEventListener("touchmove",this.listeners.touchmove)}disableTouchGestures(){this.listenerElement.removeEventListener("touchstart",this.listeners.touchstart),document.removeEventListener("touchend",this.listeners.touchend),document.removeEventListener("touchmove",this.listeners.touchmove)}enableMouseGestures(){this.listenerElement.addEventListener("mousedown",this.listeners.mousedown),document.addEventListener("mouseup",this.listeners.mouseup),document.addEventListener("mousemove",this.listeners.mousemove),this.listenerElement.addEventListener("wheel",this.listeners.wheel),document.addEventListener("mouseleave",this.listeners.mouseup)}disableMouseGestures(){this.listenerElement.removeEventListener("mousedown",this.listeners.mousedown),document.removeEventListener("mouseup",this.listeners.mouseup),document.removeEventListener("mousemove",this.listeners.mousemove),document.removeEventListener("wheel",this.listeners.wheel),document.removeEventListener("mouseleave",this.listeners.mouseup)}};z.EVT_NAME_POINTERDOWN=ft;z.EVT_NAME_POINTERMOVE=ut;z.EVT_NAME_POINTERUP=ht;z.EVT_NAME_POINTERZOOM=dt;var F=z;var Lt=o=>typeof o=="object",vt=o=>o instanceof Array;function j(o,t){let i={...o,...t};return Object.entries(t).forEach(({0:e,1:f})=>{e in o&&Lt(f)&&!vt(f)&&f!==null&&(i[e]=j(o[e],f))}),i}function K(){return{focus:{points:{innerRadius:o=>o.options.lineWidth*2,outerRadius:o=>o.options.lineWidth*2+o.options.lineWidth},axes:{x:{color:"rgba(0,0,0,0.1)",lineWidth:1},y:{color:"rgba(0,0,0,0.1)",lineWidth:1}}},color:{border:"rgba(0,0,0,0)",background:"#000000",text:"#ffffff"},shadow:{offsetX:0,offsetY:15,blur:5,color:"rgba(0,0,0,0.2)"},borderRadius:{leftTop:5,rightTop:5,leftBottom:5,rightBottom:5},viewportPadding:{left:15,right:15,top:15,bottom:15},padding:{left:25,right:10,top:5,bottom:5},mark:{offsetLeft:15,offsetTop:15,innerRadius:0,outerRadius:3},splitter:{height:5},unitInvisibleHints:!0,maxNumIterations:20}}var Et=K();function mt(o,t,i,e,f,r){let{fontFamily:d,fontSize:y}=f,{hintText:L,settings:l}=f.hints,x=j(Et,l),{focus:s,borderRadius:m,padding:E,mark:C,splitter:n}=x,{innerRadius:a,outerRadius:p}=s.points,c=D(),{transform:g}=r,b=[],M=i.pixelRatio,R={...C};R.offsetLeft*=M,R.offsetTop*=M,R.innerRadius*=M,R.outerRadius*=M;let A={...E};A.left*=M,A.top*=M,A.right*=M,A.bottom*=M;let k={...n};k.height*=M;let S=y*M;o.font=`${S}px/1 ${d}`;for(let Y=0,O=e.length;Y<O;Y++){let N=e[Y],P=N.focusPoint;if(P){g(c,P);let T=L(P[0],P[1],N,f,P.source).split(`
`),X=0,u=0,h=0;for(let B=0,I=T.length;B<I;B++){let W=o.measureText(T[B]),_=W.width;X<_&&(X=_),u+=S;let V=-Math.abs(W.actualBoundingBoxAscent),Mt=Math.abs(W.actualBoundingBoxDescent);h=S-(Mt-V)}u+=A.top+A.bottom+h,X+=A.left+A.right;let w=c[0]+20,v=c[1]-u/2;b.push({focusPoints:[{x:c[0],y:c[1],innerRadius:a(N)*M,outerRadius:p(N)*M,dataset:N}],left:w,top:v,right:w+X,bottom:v+u,correction:h,texts:[{offsetLeft:A.left,offsetTop:A.top,contents:T}],padding:A,marks:[{...R,dataset:N}]})}}return g(c,t),{ctx:o,focus:{origin:t,x:c[0],y:c[1]},viewport:{...i,backgroundColor:f.backgroundColor},settings:j(x,{font:{family:d,size:S},borderRadius:m?[Math.round(m.leftTop*M),Math.round(m.rightTop*M),Math.round(m.rightBottom*M),Math.round(m.leftBottom*M)]:null,splitter:k}),helpers:r,list:b}}var gt=o=>{let{list:t,settings:i,viewport:{width:e,height:f,pixelRatio:r},helpers:{isIntersects:d}}=o,{viewportPadding:y,splitter:{height:L}}=i,l={left:y.left*r,right:e-y.right*r,top:y.top*r,bottom:f-y.bottom*r},x=[...t].sort((E,C)=>E.focusPoints[E.focusPoints.length-1].y-C.focusPoints[0].y),s=!0,m=0;for(;s;){m++,s=!1;for(let E=0,C=x.length;E<C;E++){let n=x[E];if(n!==null){for(let a=E+1;a<C;a++){let p=x[a];if(p!==null&&d(n,p)){let c=n.bottom-n.top-n.padding.bottom-p.padding.top-n.correction+L;for(let g=0,b=p.texts.length;g<b;g++)p.texts[g].offsetTop+=c;for(let g=0,b=p.marks.length;g<b;g++)p.marks[g].offsetTop+=c;n.right=Math.max(n.right,n.left+(p.right-p.left)),n.bottom+=p.bottom-p.top-n.padding.bottom-p.padding.top-n.correction+L,n.texts=n.texts.concat(p.texts),n.focusPoints=n.focusPoints.concat(p.focusPoints),n.marks=n.marks.concat(p.marks),x[a]=null,s=!0}}x[E]=n}}if(!i.unitInvisibleHints)for(let E=0,C=x.length;E<C;E++){let n=x[E];n!==null&&(n.right<l.left||n.left>l.right||n.bottom<l.top||n.top>l.bottom)&&(x[E]=null,s=!0)}x=x.filter(E=>E);for(let E=0,C=x.length;E<C;E++){let n=x[E];if(n.left<l.left){let a=l.left-n.left;n.left+=a,n.right+=a,s=!0}else if(n.right>l.right){let a=n.right-l.right;n.left-=a,n.right-=a,s=!0}if(n.top<l.top){let a=l.top-n.top;n.top+=a,n.bottom+=a,s=!0}else if(n.bottom>l.bottom){let a=n.bottom-l.bottom;n.top-=a,n.bottom-=a,s=!0}}if(x.length<=1||m>=i.maxNumIterations)break}return{...o,list:x}},xt=o=>{let{ctx:t,list:i,settings:{font:e,color:f,shadow:r,borderRadius:d,focus:{axes:y}},viewport:{width:L,height:l,pixelRatio:x,backgroundColor:s}}=o;for(let a=0,p=i.length;a<p;a++){let c=i[a],{left:g,top:b,right:M,bottom:R}=c;c.rect={left:Math.round(g),top:Math.round(b),width:Math.round(M-g),height:Math.round(R-b)}}if(y.y){let{color:a,lineWidth:p}=y.y;t.fillStyle=a;for(let c=0,g=i.length;c<g;c++){let{focusPoints:b}=i[c];for(let M=0,R=b.length;M<R;M++){let{y:A}=b[M];t.fillRect(0,A,L,Math.round(p*x))}}}if(y.x){let{color:a,lineWidth:p}=y.x;t.fillStyle=a,t.fillRect(o.focus.x,0,Math.round(p*x),l)}if(r){let{offsetX:a,offsetY:p,blur:c,color:g}=r;t.fillStyle="rgb(255,255,255)",t.shadowColor=g,t.shadowOffsetX=a,t.shadowOffsetY=p,t.shadowBlur=c;for(let b=0,M=i.length;b<M;b++){let{left:R,top:A,width:k,height:S}=i[b].rect;d?(t.beginPath(),t.roundRect(R,A,k,S,d),t.fill()):t.fillRect(R,A,k,S)}t.shadowColor="transparent"}for(let a=0,p=i.length;a<p;a++){let{focusPoints:c}=i[a];for(let g=0,b=c.length;g<b;g++){let{x:M,y:R,innerRadius:A,outerRadius:k,dataset:{options:{lineColor:S}}}=c[g],Y=Math.round(M),O=Math.round(R);t.fillStyle=S.toString(),t.beginPath(),t.arc(Y,O,Math.round(k),0,2*Math.PI,!1),t.fill(),t.fillStyle=s,t.beginPath(),t.arc(Y,O,Math.round(A),0,2*Math.PI,!1),t.fill()}}let{border:m,background:E,text:C}=f,n=e.size;t.font=`${Math.round(n)}px/1 ${e.family}`;for(let a=0,p=i.length;a<p;a++){let{rect:{left:c,top:g,width:b,height:M},texts:R,marks:A}=i[a];t.strokeStyle=m,t.fillStyle=E,d?(t.beginPath(),t.roundRect(c,g,b,M,d),t.fill(),t.stroke()):t.fillRect(c,g,b,M),t.fillStyle=C;for(let k=0,S=R.length;k<S;k++){let{offsetLeft:Y,offsetTop:O,contents:N}=R[k],P=Math.round(Y+c),T=O+g;for(let X=0,u=N.length;X<u;X++)t.fillText(N[X],P,Math.round(T+n)),T+=n}for(let k=0,S=A.length;k<S;k++){let{offsetLeft:Y,offsetTop:O,innerRadius:N,outerRadius:P,dataset:{options:{lineColor:T}}}=A[k],X=Math.round(Y+c),u=Math.round(O+g);t.fillStyle=T.toString(),t.beginPath(),t.arc(X,u,P,0,2*Math.PI,!1),t.fill(),t.fillStyle=s,t.beginPath(),t.arc(X,u,N,0,2*Math.PI,!1),t.fill()}}};function Q(){return{color:{border:"#eeeeee",background:"#ffffff",text:"#000000"},padding:{left:5,right:5,top:5,bottom:5},itemPadding:{left:25,right:10,top:5,bottom:5},mark:{offsetLeft:15,offsetTop:15,innerRadius:0,outerRadius:3}}}var Rt=Q();function pt(o,t,i,e){let{legendText:f,settings:r}=e.legends,d=j(Rt,r),{itemPadding:y,padding:L,mark:l}=d,{fontFamily:x,fontSize:s}=e,m=[],E=0,C=0,n=t.pixelRatio,a=s*n,p={...l};p.offsetLeft*=n,p.offsetTop*=n,p.innerRadius*=n,p.outerRadius*=n;let c={...L};c.left*=n,c.top*=n,c.right*=n,c.bottom*=n;let g={...y};g.left*=n,g.top*=n,g.right*=n,g.bottom*=n,o.font=`${a}px/1 ${x}`;let b=[...Object.values(i.reduce((P,T,X)=>{let u=T.options.groupId===null?X:T.options.groupId;return u in P||(P[u]={dataset:T,i:X}),P},{}))].sort((P,T)=>P.i-T.i);for(let P=0,T=b.length;P<T;P++){let X=b[P].dataset,u=f(X,e);if(u){let h=o.measureText(u),w=h.width+g.left+g.right*n,v=-Math.abs(h.actualBoundingBoxAscent),B=Math.abs(h.actualBoundingBoxDescent);C=Math.max(C,a-(B-v)),m.push({text:{content:u,offsetLeft:g.left,offsetTop:g.top},mark:p,lineColor:X.options.lineColor,width:w,left:0,top:0}),E<w&&(E=w)}}let M=t.width-c.left-c.right,R=Math.floor(M/E),A=0,k=0,S=a+g.top+g.bottom+C;for(let P=0,T=m.length;P<T;P++){let X=m[P],u=P%R,h=Math.floor(P/R);A<u&&(A=u),k<h&&(k=h),X.left=u*E,X.top=h*S}let Y=(k+1)*S+c.top+c.bottom,O=c.left+(M-(A+1)*E)/2,N=t.height-Y+c.top;for(let P=0,T=m.length;P<T;P++){let X=m[P];X.left+=O,X.top+=N}return t.clip(0,0,t.width,t.height-Y),{ctx:o,area:{left:0,right:t.width,top:t.height-Y,bottom:t.height},viewport:{...t,backgroundColor:e.backgroundColor},settings:j(d,{font:{family:x,size:a}}),list:m}}function bt(o){let{ctx:t,area:i,settings:{font:e,color:f},viewport:{pixelRatio:r,backgroundColor:d},list:y}=o;if(f.background){let l=Math.round(i.left),x=Math.round(i.top),s=Math.round(i.right),m=Math.round(i.bottom);t.fillStyle=f.background,t.fillRect(l,x,s-l,m-x),f.border&&(t.fillStyle=f.border,t.fillRect(l,x,s-l,Math.round(1*r)))}let L=e.size;t.font=`${Math.round(L)}px/1 ${e.family}`;for(let l=0,x=y.length;l<x;l++){let{left:s,top:m,text:E,mark:C,lineColor:n}=y[l];t.fillStyle=f.text;{let{offsetLeft:a,offsetTop:p,content:c}=E;a+=s,p+=m,t.fillText(c,Math.round(a),Math.round(p+e.size))}{let{offsetLeft:a,offsetTop:p,innerRadius:c,outerRadius:g}=C,b=Math.round(a+s),M=Math.round(p+m);t.fillStyle=n.toString(),t.beginPath(),t.arc(b,M,Math.round(g),0,2*Math.PI,!1),t.fill(),t.fillStyle=d,t.beginPath(),t.arc(b,M,Math.round(c),0,2*Math.PI,!1),t.fill()}}}function G(o,t){return o.bottom>t.top&&o.right>t.left&&o.top<t.bottom&&o.left<t.right}function yt(o){let t=o.length;for(let i=0;i<t;i++)for(let e=0;e<t;e++)if(i!==e&&G(o[i].boundingRect,o[e].boundingRect))return!0;return!1}var Pt={xCanvasStep:25,yCanvasStep:25,xAxisStep:1,yAxisStep:1,xOffset:0,yOffset:0,xScale:1,yScale:1,xAxisSubdivisions:10,yAxisSubdivisions:10,lineWidth:1,pointSize:0,fontSize:15,fontFamily:"monospace",xAxisLabelXOffset:0,xAxisLabelYOffset:0,xAxisLabelDynamicPosition:!0,xAxisLabelSpacing:15,xAxisLabelFormat:o=>o.toFixed(4),xAxisLabelJoiningStep:5,xAxisLabelMarkOffset:-2,xAxisLabelMarkSize:4,xAxisLabelDisplayZero:!0,xAxisLabelEnable:!0,yAxisLabelXOffset:0,yAxisLabelYOffset:0,yAxisLabelDynamicPosition:!0,yAxisLabelSpacing:0,yAxisLabelFormat:o=>o.toFixed(4),yAxisLabelJoiningStep:5,yAxisLabelMarkOffset:-2,yAxisLabelMarkSize:4,yAxisLabelDisplayZero:!0,yAxisLabelEnable:!0,backgroundColor:"#ffffff",gridColor:"rgba(0,0,0,0.1)",axesColor:"rgba(0,0,0,0.5)",userTranslateX:!0,userTranslateY:!0,userScaleX:!0,userScaleY:!0,canvasRatio:1,canvasPixelRatio:1,clearFrame:!1,hints:{settings:K(),hintText:(o,t,i,e,f)=>`X: ${e.xAxisLabelFormat(o)}
Y: ${e.yAxisLabelFormat(t)}`,createHints:mt,displaceHints:gt,renderHints:xt},legends:{settings:Q(),legendText:(o,t)=>`${o.legend}`,createLegends:pt,renderLegends:bt},cursorPointer:"pointer",cursorGrabbing:"grabbing",bindEventHandlers:!0,invertMouseWheel:!1,mouseWheelStep:.1,afterRepaint:null},tt=class{constructor(t,i={}){this.options=i=j(Pt,i),this.elCanvas=t,this.ctx=t.getContext("2d"),this.scale=D(i.xScale,i.yScale),this.translate=D(i.xOffset,i.yOffset),this.focusPoint=D(0,0),this.datasets=[],this.currentXBounds=D(),t.style.cursor=i.cursorPointer;let e={down:!1,pt0:D(0,0),pt:D(0,0),delta:D(0,0)},f=(r,d)=>{let{clientX:y,clientY:L}=d,{left:l,right:x,top:s,bottom:m}=t.getBoundingClientRect();return r[0]=(y-l)/i.canvasRatio,r[1]=(L-s)/i.canvasRatio,l<=y&&y<=x&&s<=L&&L<=m};this.isListening=!1,this.listeners={},this.listeners[F.EVT_NAME_POINTERDOWN]=r=>{t.style.cursor=i.cursorGrabbing,r.detail.originalEvent.preventDefault(),e.down=!0,f(e.pt0,r.detail)},this.listeners[F.EVT_NAME_POINTERUP]=r=>{e.down=!1,t.style.cursor=i.cursorPointer},this.listeners[F.EVT_NAME_POINTERMOVE]=r=>{let d=f(e.pt,r.detail);if(e.down){ot(e.delta,e.pt,e.pt0),Z(e.pt0,e.pt);let y=D(i.userTranslateX?e.delta[0]:0,i.userTranslateY?e.delta[1]:0);this.move(y),this.repaint()}else if(d){let y=D();at(y,e.pt,D(i.xCanvasStep,i.yCanvasStep),this.translate),y[1]=-y[1],J(y,y,D(i.xAxisStep,i.yAxisStep)),U(y,y,this.scale),this.computeFocusPoints(y),this.repaint()}},this.listeners[F.EVT_NAME_POINTERZOOM]=r=>{r.detail.originalEvent.preventDefault();let d=r.detail.deltaScale,y=i.userScaleX===!0||typeof i.userScaleX=="function"&&i.userScaleX(r),L=i.userScaleY===!0||typeof i.userScaleY=="function"&&i.userScaleY(r),l=D(y?d:0,L?d:0);f(e.pt,r.detail),this.zoomAroundPoint(l,e.pt),this.repaint()},this.touchGestures=new F(t,{invertMouseWheel:i.invertMouseWheel,mouseWheelStep:i.mouseWheelStep}),i.bindEventHandlers&&this.bind()}computeFocusPoints(t){this.datasets.forEach(i=>{let{source:e}=i,f=e.length,r=ct(y=>e.at(y)[0],0,f-1,t[0]),d=r+1;if(r>=0&&d<f){let y=D(),L=e.at(r),l=e.at(d),x=(t[0]-L[0])/(l[0]-L[0]),s=D(x,i.options.isStepped?0:x);lt(y,L,l,s),y.source={i0:r,i1:d,s},i.focusPoint=y}else i.focusPoint=null}),Z(this.focusPoint,t)}bind(){if(!this.isListening){for(let t in this.listeners)this.elCanvas.addEventListener(t,this.listeners[t]);this.touchGestures.enableTouchGestures(),this.touchGestures.enableMouseGestures(),this.isListening=!0}}unbind(){if(this.isListening){for(let t in this.listeners)this.elCanvas.removeEventListener(t,this.listeners[t]);this.touchGestures.disableTouchGestures(),this.touchGestures.disableMouseGestures(),this.isListening=!1}}getViewportXBounds(){return nt(this.currentXBounds)}fitView(t,i=!0){let e=this.elCanvas.width,f=this.elCanvas.height;if(e<=0||f<=0||Math.abs(t.width)<=0||Math.abs(t.height)<=0)return!1;let r=this.options;r.legends&&r.legends.createLegends(this.ctx,{width:e,height:f,pixelRatio:r.canvasRatio*r.canvasPixelRatio,clip(x,s,m,E){e=m-x,f=E-s}},this.datasets,r,{isIntersects:G});let d=new DOMRect(t.x,-t.y-t.height,t.width,t.height),y=r.canvasRatio*r.canvasPixelRatio,L=D(r.xCanvasStep,r.yCanvasStep),l=D(r.xAxisStep,r.yAxisStep);if(e=e/y/L[0]*l[0],f=f/y/L[1]*l[1],this.scale[0]=e/d.width,this.scale[1]=f/d.height,i&&(this.scale[1]>this.scale[0]?this.scale[1]=this.scale[0]:this.scale[0]=this.scale[1]),this.translate[0]=-(d.x/l[0])*L[0]*this.scale[0],this.translate[1]=-(d.y/l[1])*L[1]*this.scale[1],i){let x=(e/this.scale[0]-d.width)/2,s=(f/this.scale[1]-d.height)/2;this.translate[0]+=x*L[0]*this.scale[0]/l[0],this.translate[1]+=s*L[1]*this.scale[1]/l[1]}return!0}fitViewAuto(t=!0){this.fitView(this.getBoundingRect(null,0,null,0),t),this.repaint()}getExtrems(t=null,i=null,e=null,f=null){let r=t,d=e,y=i,L=f;return this.datasets.forEach(l=>{let x=l.getExtrems();(r===null||r>x.minX)&&(r=x.minX),(d===null||d<x.maxX)&&(d=x.maxX),(y===null||y>x.minY)&&(y=x.minY),(L===null||L<x.maxY)&&(L=x.maxY)}),{minX:r,minY:y,maxX:d,maxY:L}}getBoundingRect(t=null,i=null,e=null,f=null){let{minX:r,minY:d,maxX:y,maxY:L}=this.getExtrems(),l=new DOMRect(r,d,y-r,L-d);return l.minX=r,l.minY=d,l.maxX=y,l.maxY=L,l}move(t){st(this.translate,this.translate,t)}zoomAroundPoint(t,i){let e=this.translate,f=this.scale;rt(e,e,i,t),q(f,f,t,f)}repaint(){let t,i,e=this.options,f=this.ctx,r=this.elCanvas.width,d=this.elCanvas.height,y=this.scale,L=this.datasets;if(r<=0||d<=0||y[0]===0||y[1]===0)return;let l=e.canvasRatio*e.canvasPixelRatio,x=D(e.xCanvasStep*l,e.yCanvasStep*l),s=D(this.translate[0]*l,this.translate[1]*l),m=D(x[0]*y[0],x[1]*y[1]),E=D(e.xAxisStep,e.yAxisStep),C=D(1,1),n=D(e.xAxisSubdivisions,e.yAxisSubdivisions);for(;m[0]>x[0]*n[0];)m[0]/=n[0],C[0]/=n[0];for(;m[1]>x[1]*n[1];)m[1]/=n[1],C[1]/=n[1];for(;m[0]<x[0];)m[0]*=n[0],C[0]*=n[0];for(;m[1]<x[1];)m[1]*=n[1],C[1]*=n[1];let a=s[0]-(Math.floor(s[0]/m[0])+(s[0]>0?1:0))*m[0],p=s[1]-(Math.floor(s[1]/m[1])+(s[1]>0?1:0))*m[1],c=(b,M)=>{J(b,M,x),U(b,b,E),b[1]=-b[1],q(b,b,y,s)};e.clearFrame&&f.clearRect(0,0,r,d),f.fillStyle=e.backgroundColor,f.fillRect(0,0,r,d);let g=null;if(e.legends){let{createLegends:b,renderLegends:M}=e.legends,R=b(f,{width:r,height:d,pixelRatio:l,clip(A,k,S,Y){r=S-A,d=Y-k,g=new Path2D,g.rect(A,k,r,d)}},L,e,{isIntersects:G});M(R)}g&&(f.save(),f.clip(g)),f.fillStyle=e.gridColor;for(let b=a;b<=r;b+=m[0])f.fillRect(b,0,1*l,d);for(let b=p;b<=d;b+=m[1])f.fillRect(0,b,r,1*l);f.fillStyle=e.axesColor,f.fillRect(s[0],0,1*l,d),f.fillRect(0,s[1],r,1*l);for(let b=0,M=L.length;b<M;b++){let R=L[b],{source:A,tree:k}=R;if(A.length>1){f.strokeStyle=R.options.lineColor,f.lineWidth=R.options.lineWidth*l;let S=D(),Y=D(),O=(u,h,w)=>{if(c(Y,[h.maxX,h.maxY]),Y[0]<0||(c(S,[h.minX,h.minY]),S[0]>r))return;let v=Math.round(S[0]),B=Math.round(Y[0]);if(v===B)u.beginPath(),u.setLineDash(R.options.lineDash.map(I=>I*l)),u.moveTo(v,S[1]),u.lineTo(B,Y[1]),u.stroke();else if(h.left&&h.right)O(u,h.left,w),O(u,h.right,w);else{u.beginPath(),u.setLineDash(R.options.lineDash.map(I=>I*l)),c(S,w.at(h.s)),u.moveTo(S[0],S[1]);for(let I=h.s+1;I<=h.e;I++)c(S,w.at(I)),u.lineTo(S[0],S[1]);u.stroke()}u.setLineDash([])},N=(u,h,w)=>{if(c(Y,[h.maxX,h.maxY]),Y[0]<0||(c(S,[h.minX,h.minY]),S[0]>r))return;let v=Math.round(S[0]),B=Math.round(Y[0]);if(v===B)u.beginPath(),u.setLineDash(R.options.lineDash.map(I=>I*l)),u.moveTo(v,S[1]),u.lineTo(B,Y[1]),u.stroke();else if(h.left&&h.right)N(u,h.left,w),N(u,h.right,w);else{u.beginPath(),u.setLineDash(R.options.lineDash.map(W=>W*l)),c(S,w.at(h.s)),u.moveTo(S[0],S[1]);let I=S[1];for(let W=h.s+1;W<=h.e;W++)c(S,w.at(W)),u.lineTo(S[0],I),u.lineTo(S[0],S[1]),I=S[1];u.stroke()}u.setLineDash([])},P=2*Math.PI,T=(u,h,w,v)=>{if(c(Y,[h.maxX,h.maxY]),Y[0]<0||(c(S,[h.minX,h.minY]),S[0]>r))return;let B=Math.round(S[0]),I=Math.round(Y[0]);if(B===I)u.beginPath(),u.arc(B,S[1],v,0,P,!1),u.fill(),u.beginPath(),u.arc(I,Y[1],v,0,P,!1),u.stroke();else if(h.left&&h.right)T(u,h.left,w,v),T(u,h.right,w,v);else{for(let W=h.s;W<=h.e;W++)c(S,w.at(W)),u.beginPath(),u.arc(S[0],S[1],v,0,P,!1),u.fill();u.stroke()}};R.options.isStepped?N(f,k,A):O(f,k,A);let X=R.options.pointRadius;X>0&&(f.fillStyle=R.options.lineColor,T(f,k,A,X))}}if(e.xAxisLabelEnable||e.yAxisLabelEnable){let b=e.fontSize*l;if(f.font=`${b}px/1 ${e.fontFamily}`,f.fillStyle=e.axesColor,this.currentXBounds[0]=(0-s[0])/m[0]*C[0]*E[0],this.currentXBounds[1]=(r-s[0])/m[0]*C[0]*E[0],e.xAxisLabelEnable){let M=e.xAxisLabelXOffset*l,R=e.xAxisLabelYOffset*l,A=e.xAxisLabelMarkOffset*l,k=e.xAxisLabelMarkSize*l,S=e.xAxisLabelSpacing*l,Y=S/2,O=[],N=!1,P=!1;for(let u=a;u<=r;u+=m[0]){let h=u-s[0],w=Math.round(h/m[0]),B=w*C[0]*E[0],I=e.xAxisLabelFormat(B),W=f.measureText(I),_={i:w,gridX:u,text:I,textMetrics:W,x:u-W.width/2+M,y:s[1]+b+R};O.push(_),_.y-b-R<0&&(N=!0),_.y+R>d&&(P=!0)}for(let u=0,h=O.length;u<h;u++){let w=O[u];i=w.y,e.xAxisLabelDynamicPosition&&(i=N?b+R:P?d-R:i);let v=new DOMRect(w.x-Y,i-b,w.textMetrics.width+S,b);w.y=i,w.boundingRect=v}let T=e.xAxisLabelJoiningStep,X=O;for(;yt(O);)O=X.filter(u=>$(Math.abs(u.i)%T)),T+=e.xAxisLabelJoiningStep;for(let u=0,h=O.length;u<h;u++){let w=O[u];!e.xAxisLabelDisplayZero&&w.i===0||(f.fillRect(w.gridX,s[1]+A,l,k),f.fillText(w.text,w.x,w.y))}}if(e.yAxisLabelEnable){let M=e.yAxisLabelXOffset*l,R=e.yAxisLabelYOffset*l,A=e.yAxisLabelMarkOffset*l,k=e.yAxisLabelMarkSize*l,S=e.yAxisLabelSpacing*l,Y=S/2,O=[],N=0,P=!1,T=!1;for(let h=p;h<=d;h+=m[1]){let w=s[1]-h,v=Math.round(w/m[1]),I=v*C[1]*E[1],W=e.yAxisLabelFormat(I),_=f.measureText(W),V={i:v,gridY:h,text:W,textMetrics:_,x:s[0]-_.width+M,y:h+b/2+R};O.push(V),N<_.width&&(N=_.width),V.x+M<0&&(P=!0),V.x+V.textMetrics.width-M>r&&(T=!0)}for(let h=0,w=O.length;h<w;h++){let v=O[h];t=v.x,e.yAxisLabelDynamicPosition&&(t=P?N-v.textMetrics.width-M:T?r-v.textMetrics.width+M:t);let B=new DOMRect(t,v.y-b-Y,v.textMetrics.width,b+S);v.x=t,v.boundingRect=B}let X=e.yAxisLabelJoiningStep,u=O;for(;yt(O);)O=u.filter(h=>$(Math.abs(h.i)%X)),X+=e.yAxisLabelJoiningStep;O=O.filter(h=>h.boundingRect.bottom>0&&h.boundingRect.top<d),N=0,P=!1,T=!1;for(let h=0,w=O.length;h<w;h++){let v=O[h];v.x=s[0]-v.textMetrics.width+M,N<v.textMetrics.width&&(N=v.textMetrics.width),v.x+M<0&&(P=!0),v.x+v.textMetrics.width-M>r&&(T=!0)}for(let h=0,w=O.length;h<w;h++){let v=O[h];t=v.x,e.yAxisLabelDynamicPosition&&(t=P?N-v.textMetrics.width-M:T?r-v.textMetrics.width+M:t),v.x=t}for(let h=0,w=O.length;h<w;h++){let v=O[h];!e.yAxisLabelDisplayZero&&v.i===0||(f.fillRect(s[0]+A,v.gridY,k,l),f.fillText(v.text,v.x,v.y))}}}if(e.hints){let{createHints:b,displaceHints:M,renderHints:R}=e.hints,A=b(f,this.focusPoint,{width:r,height:d,pixelRatio:l},L,e,{transform:c,isIntersects:G});A=M(A),R(A)}g&&f.restore(),e.afterRepaint&&e.afterRepaint()}},wt=tt;var et=(o,t,i,e)=>{let f=i-t<=e,[r,d]=o.at(t),[y,L]=o.at(i),l,x;if(f)for(let s=t;s<=i;s++){let m=o.at(s)[1];d>m&&(d=m),L<m&&(L=m)}else{let s=Math.floor((i-t)/2),m=t+s;l=et(o,t,m,e),x=et(o,m,i,e),d=Math.min(l.minY,x.minY),L=Math.max(l.maxY,x.maxY)}return{s:t,e:i,minX:r,minY:d,maxX:y,maxY:L,left:l,right:x}},it=class{constructor(t="",i={}){if("groupId"in i||(i.groupId=null),!("lineColor"in i)){let e=()=>Math.round(Math.random()*256);i.lineColor=`rgb(${e()},${e()},${e()})`}"isStepped"in i||(i.isStepped=!1),"lineWidth"in i||(i.lineWidth=1),"lineDash"in i||(i.lineDash=[]),"pointRadius"in i||(i.pointRadius=0),this.legend=t,this.options=i}compile(t,i){this.source=t,this.rebuild(i)}rebuild(t=100){let i=this.source,e=i.length;this.tree=e>0?et(i,0,e-1,t):null}getExtrems(t=null,i=null,e=null,f=null){let r=t,d=e,y=i,L=f,{source:l}=this;for(let x=0,s=l.length;x<s;x++){let[m,E]=l.at(x);(r===null||r>m)&&(r=m),(d===null||d<m)&&(d=m),(y===null||y>E)&&(y=E),(L===null||L<E)&&(L=E)}return{minX:r,minY:y,maxX:d,maxY:L}}getBoundingRect(){let{minX:t,minY:i,maxX:e,maxY:f}=this.getExtrems(),r=new DOMRect(t,i,e-t,f-i);return r.minX=t,r.minY=i,r.maxX=e,r.maxY=f,r}},At=it;export{wt as Chart,At as Dataset};
//# sourceMappingURL=littlechart.min.js.map
