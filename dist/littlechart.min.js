function _(l,t=.001){return Math.abs(l)<t}function I(l=0,t=0){return[l,t]}function at(l){return I(l[0],l[1])}function $(l,t){return l[0]=t[0],l[1]=t[1],l}function ct(l,t,n){return l[0]=t[0]+n[0],l[1]=t[1]+n[1],l}function ft(l,t,n){return l[0]=t[0]-n[0],l[1]=t[1]-n[1],l}function J(l,t,n){return l[0]=t[0]*n[0],l[1]=t[1]*n[1],l}function V(l,t,n){return l[0]=t[0]/n[0],l[1]=t[1]/n[1],l}function ut(l,t,n,e){return l[0]=t[0]+e[0]*(n[0]-t[0]),l[1]=t[1]+e[1]*(n[1]-t[1]),l}function ht(l,t,n,e){return l[0]=t[0]-e[0]*(n[0]-t[0]),l[1]=t[1]-e[1]*(n[1]-t[1]),l}function U(l,t,n,e){return l[0]=t[0]*n[0]+e[0],l[1]=t[1]*n[1]+e[1],l}function dt(l,t,n,e){return l[0]=(t[0]-e[0])/n[0],l[1]=(t[1]-e[1])/n[1],l}var q=(l,t,n)=>{let e=-1;for(;t<=n;){let r=t+Math.floor((n-t+1)/2),a=l(r);a<0?(e=r,t=r+1):(a>0||a===0)&&(n=r-1)}return e};var K=(l,t,n)=>{let e=-1;for(;t<=n;){let r=t+Math.floor((n-t+1)/2),a=l(r);a<0?(e=r,t=r+1):a>0?n=r-1:a===0&&(e=r,t=r+1)}return e};var H=l=>{l.preventDefault(),l.stopPropagation()},Q="touchgestures:pointerdown",tt="touchgestures:pointermove",et="touchgestures:pointerup",nt="touchgestures:pointerzoom",Lt={listenerElement:null,invertMouseWheel:!1,mouseWheelStep:.1},F=class{constructor(t,n={}){let e={...Lt,...n};this.element=t,this.listenerElement=e.listenerElement!==null?e.listenerElement:t;let r=(s,x)=>this.element.dispatchEvent(new CustomEvent(s,{detail:x})),a=(s,x,m)=>r(Q,{originalEvent:s,clientX:x,clientY:m}),u=(s,x,m)=>r(et,{originalEvent:s,clientX:x,clientY:m}),g=(s,x,m,L)=>r(nt,{originalEvent:s,clientX:x,clientY:m,deltaScale:L}),p=(s,x,m,L,b)=>r(tt,{originalEvent:s,clientX:x,clientY:m,movementX:L,movementY:b}),o=null,h=null,i={x:0,y:0},d={x:0,y:0},R=e.invertMouseWheel?-1:1,k=e.mouseWheelStep;this.listeners={touchstart:s=>{let x=s.target.getBoundingClientRect();if(o!==null){let m=s.changedTouches[0];m.identifier!==o&&(h=m.identifier,d.x=m.clientX-x.left,d.y=m.clientY-x.top,u(s,i.x,i.y),a(s,i.x+(d.x-i.x)/2,i.y+(d.y-i.y)/2))}else{let m=s.changedTouches[0];o=m.identifier,i.x=m.clientX-x.left,i.y=m.clientY-x.top,a(s,i.x,i.y)}},touchend:s=>{let x=Array.from(s.changedTouches);if(o!==null&&h!==null){let m=x.find(b=>o===b.identifier),L=x.find(b=>h===b.identifier);u(s,i.x+(d.x-i.x)/2,i.y+(d.y-i.y)/2),m&&L?(o=null,h=null):m&&!L?(o=h,i.x=d.x,i.y=d.y,h=null):!m&&L&&(h=null),o!==null&&a(s,i.x,i.y)}else o!==null&&x.find(L=>o===L.identifier)&&(o=null,u(s,i.x,i.y))},touchmove:s=>{let x=s.target.getBoundingClientRect();if(o!==null&&h!==null){let m={x:i.x,y:i.y},L={x:d.x,y:d.y},b=Array.from(s.changedTouches).find(Y=>o===Y.identifier),y=Array.from(s.changedTouches).find(Y=>h===Y.identifier);b&&(m.x=b.clientX-x.left,m.y=b.clientY-x.top),y&&(L.x=y.clientX-x.left,L.y=y.clientY-x.top);let w=d.x-i.x,M=d.y-i.y,A=L.x-m.x,T=L.y-m.y,v=Math.hypot(w,M),X=Math.hypot(A,T),O=1-v/X,C={x:i.x+w/2,y:i.y+M/2},S={x:m.x+A/2,y:m.y+T/2};p(s,S.x,S.y,S.x-C.x,S.y-C.y),u(s,S.x,S.y),g(s,S.x,S.y,O),a(s,S.x,S.y),i.x=m.x,i.y=m.y,d.x=L.x,d.y=L.y}else if(o!==null){let m={x:i.x,y:i.y},L=Array.from(s.changedTouches).find(b=>o===b.identifier);if(!L)return;m.x=L.clientX-x.left,m.y=L.clientY-x.top,p(s,m.x,m.y,m.x-i.x,m.y-i.y),i.x=m.x,i.y=m.y}},mousedown:s=>{i.x=s.clientX,i.y=s.clientY,a(s,i.x,i.y)},mouseup:s=>{i.x=s.clientX,i.y=s.clientY,u(s,i.x,i.y)},mousemove:s=>{let x={x:s.clientX,y:s.clientY};p(s,x.x,x.y,x.x-i.x,x.y-i.y),i.x=x.x,i.y=x.y},wheel:s=>{let x=k*(s.deltaY>0?1:-1)*R;g(s,s.clientX,s.clientY,x)}}}enableNativeGestures(){document.removeEventListener("gesturestart",H),document.removeEventListener("gesturechange",H),document.removeEventListener("gestureend",H)}disableNativeGestures(){document.addEventListener("gesturestart",H),document.addEventListener("gesturechange",H),document.addEventListener("gestureend",H)}enableTouchGestures(){this.listenerElement.addEventListener("touchstart",this.listeners.touchstart),document.addEventListener("touchend",this.listeners.touchend),document.addEventListener("touchmove",this.listeners.touchmove)}disableTouchGestures(){this.listenerElement.removeEventListener("touchstart",this.listeners.touchstart),document.removeEventListener("touchend",this.listeners.touchend),document.removeEventListener("touchmove",this.listeners.touchmove)}enableMouseGestures(){this.listenerElement.addEventListener("mousedown",this.listeners.mousedown),document.addEventListener("mouseup",this.listeners.mouseup),document.addEventListener("mousemove",this.listeners.mousemove),this.listenerElement.addEventListener("wheel",this.listeners.wheel),document.addEventListener("mouseleave",this.listeners.mouseup)}disableMouseGestures(){this.listenerElement.removeEventListener("mousedown",this.listeners.mousedown),document.removeEventListener("mouseup",this.listeners.mouseup),document.removeEventListener("mousemove",this.listeners.mousemove),document.removeEventListener("wheel",this.listeners.wheel),document.removeEventListener("mouseleave",this.listeners.mouseup)}};var Rt=l=>typeof l=="object",Pt=l=>l instanceof Array;function j(l,t){let n={...l,...t};return Object.entries(t).forEach(({0:e,1:r})=>{e in l&&Rt(r)&&!Pt(r)&&r!==null&&(n[e]=j(l[e],r))}),n}function st(){return{focus:{points:{innerRadius:l=>l.options.lineWidth*2,outerRadius:l=>l.options.lineWidth*2+l.options.lineWidth},axes:{x:{color:"rgba(0,0,0,0.1)",lineWidth:1},y:{color:"rgba(0,0,0,0.1)",lineWidth:1}}},color:{border:"rgba(0,0,0,0)",background:"#000000",text:"#ffffff"},shadow:{offsetX:0,offsetY:15,blur:5,color:"rgba(0,0,0,0.2)"},borderRadius:{leftTop:5,rightTop:5,leftBottom:5,rightBottom:5},viewportPadding:{left:15,right:15,top:15,bottom:15},padding:{left:25,right:10,top:5,bottom:5},mark:{offsetLeft:15,offsetTop:15,innerRadius:0,outerRadius:3},splitter:{height:5},unitInvisibleHints:!0,maxNumIterations:20}}var Et=st();function mt(l,t,n,e,r,a){let{fontFamily:u,fontSize:g,snapToPoints:p}=r,{hintText:o,settings:h}=r.hints,i=j(Et,h),{focus:d,borderRadius:R,padding:k,mark:s,splitter:x}=i,{innerRadius:m,outerRadius:L}=d.points,b=I(),{transform:y}=a,w=[],M=n.pixelRatio,A={...s};A.offsetLeft*=M,A.offsetTop*=M,A.innerRadius*=M,A.outerRadius*=M;let T={...k};T.left*=M,T.top*=M,T.right*=M,T.bottom*=M;let v={...x};v.height*=M;let X=g*M;l.font=`${X}px/1 ${u}`;for(let O=0,C=e.length;O<C;O++){let S=e[O],Y=S.focusPoint;if(Y){y(b,Y);let D=o(Y[0],Y[1],S,r,Y.source).split(`
`),f=0,c=0,E=0;for(let B=0,W=D.length;B<W;B++){let G=l.measureText(D[B]),z=G.width;f<z&&(f=z),c+=X;let Mt=-Math.abs(G.actualBoundingBoxAscent),vt=Math.abs(G.actualBoundingBoxDescent);E=X-(vt-Mt)}c+=T.top+T.bottom+E,f+=T.left+T.right;let P=b[0]+20,N=b[1]-c/2;w.push({focusPoints:[{x:b[0],y:b[1],innerRadius:m(S)*M,outerRadius:L(S)*M,dataset:S}],left:P,top:N,right:P+f,bottom:N+c,correction:E,texts:[{offsetLeft:T.left,offsetTop:T.top,contents:D}],padding:T,marks:[{...A,dataset:S}]})}}return y(b,t),{ctx:l,snapToPoints:p,focus:{origin:t,x:b[0],y:b[1]},viewport:{...n,backgroundColor:r.backgroundColor},settings:j(i,{font:{family:u,size:X},borderRadius:R?[Math.round(R.leftTop*M),Math.round(R.rightTop*M),Math.round(R.rightBottom*M),Math.round(R.leftBottom*M)]:null,splitter:v}),helpers:a,list:w}}var xt=l=>{let{list:t,settings:n,viewport:{width:e,height:r,pixelRatio:a},helpers:{isIntersects:u}}=l,{viewportPadding:g,splitter:{height:p}}=n,o={left:g.left*a,right:e-g.right*a,top:g.top*a,bottom:r-g.bottom*a},h=[...t].sort((R,k)=>R.focusPoints[R.focusPoints.length-1].y-k.focusPoints[0].y),i=!0,d=0;for(;i;){d++,i=!1;for(let R=0,k=h.length;R<k;R++){let s=h[R];if(s!==null){for(let x=R+1;x<k;x++){let m=h[x];if(m!==null&&u(s,m)){let L=s.bottom-s.top-s.padding.bottom-m.padding.top-s.correction+p;for(let b=0,y=m.texts.length;b<y;b++)m.texts[b].offsetTop+=L;for(let b=0,y=m.marks.length;b<y;b++)m.marks[b].offsetTop+=L;s.right=Math.max(s.right,s.left+(m.right-m.left)),s.bottom+=m.bottom-m.top-s.padding.bottom-m.padding.top-s.correction+p,s.texts=s.texts.concat(m.texts),s.focusPoints=s.focusPoints.concat(m.focusPoints),s.marks=s.marks.concat(m.marks),h[x]=null,i=!0}}h[R]=s}}if(!n.unitInvisibleHints)for(let R=0,k=h.length;R<k;R++){let s=h[R];s!==null&&(s.right<o.left||s.left>o.right||s.bottom<o.top||s.top>o.bottom)&&(h[R]=null,i=!0)}h=h.filter(R=>R);for(let R=0,k=h.length;R<k;R++){let s=h[R];if(s.left<o.left){let x=o.left-s.left;s.left+=x,s.right+=x,i=!0}else if(s.right>o.right){let x=s.right-o.right;s.left-=x,s.right-=x,i=!0}if(s.top<o.top){let x=o.top-s.top;s.top+=x,s.bottom+=x,i=!0}else if(s.bottom>o.bottom){let x=s.bottom-o.bottom;s.top-=x,s.bottom-=x,i=!0}}if(h.length<=1||d>=n.maxNumIterations)break}return{...l,list:h}},gt=l=>{let{ctx:t,snapToPoints:n,list:e,settings:{font:r,color:a,shadow:u,borderRadius:g,focus:{axes:p}},viewport:{width:o,height:h,pixelRatio:i,backgroundColor:d}}=l;for(let b=0,y=e.length;b<y;b++){let w=e[b],{left:M,top:A,right:T,bottom:v}=w;w.rect={left:Math.round(M),top:Math.round(A),width:Math.round(T-M),height:Math.round(v-A)}}let R={},k={};if(p.y){let{color:b,lineWidth:y}=p.y;t.fillStyle=b;for(let w=0,M=e.length;w<M;w++){let{focusPoints:A}=e[w];for(let T=0,v=A.length;T<v;T++){let{x:X,y:O}=A[T];R[X]||(t.fillRect(X,0,Math.round(y*i),h),R[X]=!0),k[O]||(t.fillRect(0,O,o,Math.round(y*i)),k[O]=!0)}}}if(!n&&p.x){let{color:b,lineWidth:y}=p.x;t.fillStyle=b;let w=l.focus.x;R[w]||(t.fillRect(l.focus.x,0,Math.round(y*i),h),R[w]=!0)}if(u){let{offsetX:b,offsetY:y,blur:w,color:M}=u;t.fillStyle="rgb(255,255,255)",t.shadowColor=M,t.shadowOffsetX=b,t.shadowOffsetY=y,t.shadowBlur=w;for(let A=0,T=e.length;A<T;A++){let{left:v,top:X,width:O,height:C}=e[A].rect;g?(t.beginPath(),t.roundRect(v,X,O,C,g),t.fill()):t.fillRect(v,X,O,C)}t.shadowColor="transparent"}for(let b=0,y=e.length;b<y;b++){let{focusPoints:w}=e[b];for(let M=0,A=w.length;M<A;M++){let{x:T,y:v,innerRadius:X,outerRadius:O,dataset:{options:{lineColor:C}}}=w[M],S=Math.round(T),Y=Math.round(v);t.fillStyle=C.toString(),t.beginPath(),t.arc(S,Y,Math.round(O),0,2*Math.PI,!1),t.fill(),t.fillStyle=d,t.beginPath(),t.arc(S,Y,Math.round(X),0,2*Math.PI,!1),t.fill()}}let{border:s,background:x,text:m}=a,L=r.size;t.font=`${Math.round(L)}px/1 ${r.family}`;for(let b=0,y=e.length;b<y;b++){let{rect:{left:w,top:M,width:A,height:T},texts:v,marks:X}=e[b];t.strokeStyle=s,t.fillStyle=x,g?(t.beginPath(),t.roundRect(w,M,A,T,g),t.fill(),t.stroke()):t.fillRect(w,M,A,T),t.fillStyle=m;for(let O=0,C=v.length;O<C;O++){let{offsetLeft:S,offsetTop:Y,contents:D}=v[O],f=Math.round(S+w),c=Y+M;for(let E=0,P=D.length;E<P;E++)t.fillText(D[E],f,Math.round(c+L)),c+=L}for(let O=0,C=X.length;O<C;O++){let{offsetLeft:S,offsetTop:Y,innerRadius:D,outerRadius:f,dataset:{options:{lineColor:c}}}=X[O],E=Math.round(S+w),P=Math.round(Y+M);t.fillStyle=c.toString(),t.beginPath(),t.arc(E,P,f,0,2*Math.PI,!1),t.fill(),t.fillStyle=d,t.beginPath(),t.arc(E,P,D,0,2*Math.PI,!1),t.fill()}}};function it(){return{color:{border:"#eeeeee",background:"#ffffff",text:"#000000"},padding:{left:5,right:5,top:5,bottom:5},itemPadding:{left:25,right:10,top:5,bottom:5},mark:{offsetLeft:15,offsetTop:15,innerRadius:0,outerRadius:3}}}var wt=it();function pt(l,t,n,e){let{legendText:r,settings:a}=e.legends,u=j(wt,a),{itemPadding:g,padding:p,mark:o}=u,{fontFamily:h,fontSize:i}=e,d=[],R=0,k=0,s=t.pixelRatio,x=i*s,m={...o};m.offsetLeft*=s,m.offsetTop*=s,m.innerRadius*=s,m.outerRadius*=s;let L={...p};L.left*=s,L.top*=s,L.right*=s,L.bottom*=s;let b={...g};b.left*=s,b.top*=s,b.right*=s,b.bottom*=s,l.font=`${x}px/1 ${h}`;let y=[...Object.values(n.reduce((S,Y,D)=>{let f=Y.options.groupId===null?D:Y.options.groupId;return f in S||(S[f]={dataset:Y,i:D}),S},{}))].sort((S,Y)=>S.i-Y.i);for(let S=0,Y=y.length;S<Y;S++){let D=y[S].dataset,f=r(D,e);if(f){let c=l.measureText(f),E=c.width+b.left+b.right*s,P=-Math.abs(c.actualBoundingBoxAscent),N=Math.abs(c.actualBoundingBoxDescent);k=Math.max(k,x-(N-P)),d.push({text:{content:f,offsetLeft:b.left,offsetTop:b.top},mark:m,lineColor:D.options.lineColor,width:E,left:0,top:0}),R<E&&(R=E)}}let w=t.width-L.left-L.right,M=Math.floor(w/R),A=0,T=0,v=x+b.top+b.bottom+k;for(let S=0,Y=d.length;S<Y;S++){let D=d[S],f=S%M,c=Math.floor(S/M);A<f&&(A=f),T<c&&(T=c),D.left=f*R,D.top=c*v}let X=(T+1)*v+L.top+L.bottom,O=L.left+(w-(A+1)*R)/2,C=t.height-X+L.top;for(let S=0,Y=d.length;S<Y;S++){let D=d[S];D.left+=O,D.top+=C}return t.clip(0,0,t.width,t.height-X),{ctx:l,area:{left:0,right:t.width,top:t.height-X,bottom:t.height},viewport:{...t,backgroundColor:e.backgroundColor},settings:j(u,{font:{family:h,size:x}}),list:d}}function bt(l){let{ctx:t,area:n,settings:{font:e,color:r},viewport:{pixelRatio:a,backgroundColor:u},list:g}=l;if(r.background){let o=Math.round(n.left),h=Math.round(n.top),i=Math.round(n.right),d=Math.round(n.bottom);t.fillStyle=r.background,t.fillRect(o,h,i-o,d-h),r.border&&(t.fillStyle=r.border,t.fillRect(o,h,i-o,Math.round(1*a)))}let p=e.size;t.font=`${Math.round(p)}px/1 ${e.family}`;for(let o=0,h=g.length;o<h;o++){let{left:i,top:d,text:R,mark:k,lineColor:s}=g[o];t.fillStyle=r.text;{let{offsetLeft:x,offsetTop:m,content:L}=R;x+=i,m+=d,t.fillText(L,Math.round(x),Math.round(m+e.size))}{let{offsetLeft:x,offsetTop:m,innerRadius:L,outerRadius:b}=k,y=Math.round(x+i),w=Math.round(m+d);t.fillStyle=s.toString(),t.beginPath(),t.arc(y,w,Math.round(b),0,2*Math.PI,!1),t.fill(),t.fillStyle=u,t.beginPath(),t.arc(y,w,Math.round(L),0,2*Math.PI,!1),t.fill()}}}function Z(l,t){return l.bottom>t.top&&l.right>t.left&&l.top<t.bottom&&l.left<t.right}function yt(l){let t=l.length;for(let n=0;n<t;n++)for(let e=0;e<t;e++)if(n!==e&&Z(l[n].boundingRect,l[e].boundingRect))return!0;return!1}var Ot={xCanvasStep:25,yCanvasStep:25,xAxisStep:1,yAxisStep:1,xOffset:0,yOffset:0,xScale:1,yScale:1,xAxisSubdivisions:10,yAxisSubdivisions:10,lineWidth:1,fontSize:15,fontFamily:"monospace",xAxisLabelXOffset:0,xAxisLabelYOffset:0,xAxisLabelDynamicPosition:!0,xAxisLabelSpacing:15,xAxisLabelFormat:l=>l.toFixed(4),xAxisLabelJoiningStep:5,xAxisLabelMarkOffset:-2,xAxisLabelMarkSize:4,xAxisLabelDisplayZero:!0,xAxisLabelEnable:!0,yAxisLabelXOffset:0,yAxisLabelYOffset:0,yAxisLabelDynamicPosition:!0,yAxisLabelSpacing:0,yAxisLabelFormat:l=>l.toFixed(4),yAxisLabelJoiningStep:5,yAxisLabelMarkOffset:-2,yAxisLabelMarkSize:4,yAxisLabelDisplayZero:!0,yAxisLabelEnable:!0,backgroundColor:"#ffffff",gridColor:"rgba(0,0,0,0.1)",axesColor:"rgba(0,0,0,0.5)",userTranslateX:!0,userTranslateY:!0,userScaleX:!0,userScaleY:!0,canvasRatio:1,canvasPixelRatio:1,clearFrame:!1,hints:{settings:st(),hintText:(l,t,n,e,r)=>`X: ${e.xAxisLabelFormat(l)}
Y: ${e.yAxisLabelFormat(t)}`,createHints:mt,displaceHints:xt,renderHints:gt},legends:{settings:it(),legendText:(l,t)=>`${l.legend}`,createLegends:pt,renderLegends:bt},cursorPointer:"pointer",cursorGrabbing:"grabbing",bindEventHandlers:!0,invertMouseWheel:!1,mouseWheelStep:.1,afterRepaint:null,snapToPoints:!1},ot=class{constructor(t,n={}){this.options=n=j(Ot,n),this.elCanvas=t,this.ctx=t.getContext("2d"),this.scale=I(n.xScale,n.yScale),this.translate=I(n.xOffset,n.yOffset),this.focusPoint=I(0,0),this.datasets=[],this.currentXBounds=I(),t.style.cursor=n.cursorPointer;let e={down:!1,pt0:I(0,0),pt:I(0,0),delta:I(0,0)},r=(a,u)=>{let{clientX:g,clientY:p}=u,{left:o,right:h,top:i,bottom:d}=t.getBoundingClientRect();return a[0]=(g-o)/n.canvasRatio,a[1]=(p-i)/n.canvasRatio,o<=g&&g<=h&&i<=p&&p<=d};this.isListening=!1,this.listeners={},this.listeners[Q]=a=>{t.style.cursor=n.cursorGrabbing,a.detail.originalEvent.preventDefault(),e.down=!0,r(e.pt0,a.detail)},this.listeners[et]=a=>{e.down=!1,t.style.cursor=n.cursorPointer},this.listeners[tt]=a=>{let u=r(e.pt,a.detail);if(e.down){ft(e.delta,e.pt,e.pt0),$(e.pt0,e.pt);let g=I(n.userTranslateX?e.delta[0]:0,n.userTranslateY?e.delta[1]:0);this.move(g),this.repaint()}else if(u){let g=I();dt(g,e.pt,I(n.xCanvasStep,n.yCanvasStep),this.translate),g[1]=-g[1],J(g,g,I(n.xAxisStep,n.yAxisStep)),V(g,g,this.scale),this.computeFocusPoints(g),this.repaint()}},this.listeners[nt]=a=>{a.detail.originalEvent.preventDefault();let u=a.detail.deltaScale,g=n.userScaleX===!0||typeof n.userScaleX=="function"&&n.userScaleX(a),p=n.userScaleY===!0||typeof n.userScaleY=="function"&&n.userScaleY(a),o=I(g?u:0,p?u:0);r(e.pt,a.detail),this.zoomAroundPoint(o,e.pt),this.repaint()},this.touchGestures=new F(t,{invertMouseWheel:n.invertMouseWheel,mouseWheelStep:n.mouseWheelStep}),n.bindEventHandlers&&this.bind()}computeFocusPoints(t){let{snapToPoints:n}=this.options;n?this.datasets.forEach(e=>{let{source:r}=e,a=r.length,u=K(p=>r.at(p)[0]-t[0],0,a-1),g=u<a?u+1:u;if(u>=0){let p=I(),o=r.at(u);$(p,o);let h=0,i=I(h,e.options.isStepped?0:h);p.source={i0:u,i1:g,s:i},e.focusPoint=p}else e.focusPoint=null}):this.datasets.forEach(e=>{let{source:r}=e,a=r.length,u=q(p=>r.at(p)[0]-t[0],0,a-1),g=u+1;if(u>=0&&g<a){let p=I(),o=r.at(u),h=r.at(g),i=(t[0]-o[0])/(h[0]-o[0]),d=I(i,e.options.isStepped?0:i);ut(p,o,h,d),p.source={i0:u,i1:g,s:d},e.focusPoint=p}else e.focusPoint=null}),$(this.focusPoint,t)}bind(){if(!this.isListening){for(let t in this.listeners)this.elCanvas.addEventListener(t,this.listeners[t]);this.touchGestures.enableTouchGestures(),this.touchGestures.enableMouseGestures(),this.isListening=!0}}unbind(){if(this.isListening){for(let t in this.listeners)this.elCanvas.removeEventListener(t,this.listeners[t]);this.touchGestures.disableTouchGestures(),this.touchGestures.disableMouseGestures(),this.isListening=!1}}getViewportXBounds(){return at(this.currentXBounds)}fitView(t,n=!0){let e=this.elCanvas.width,r=this.elCanvas.height;if(e<=0||r<=0||Math.abs(t.width)<=0||Math.abs(t.height)<=0)return!1;let a=this.options;a.legends&&a.legends.createLegends(this.ctx,{width:e,height:r,pixelRatio:a.canvasRatio*a.canvasPixelRatio,clip(h,i,d,R){e=d-h,r=R-i}},this.datasets,a,{isIntersects:Z});let u=new DOMRect(t.x,-t.y-t.height,t.width,t.height),g=a.canvasRatio*a.canvasPixelRatio,p=I(a.xCanvasStep,a.yCanvasStep),o=I(a.xAxisStep,a.yAxisStep);if(e=e/g/p[0]*o[0],r=r/g/p[1]*o[1],this.scale[0]=e/u.width,this.scale[1]=r/u.height,n&&(this.scale[1]>this.scale[0]?this.scale[1]=this.scale[0]:this.scale[0]=this.scale[1]),this.translate[0]=-(u.x/o[0])*p[0]*this.scale[0],this.translate[1]=-(u.y/o[1])*p[1]*this.scale[1],n){let h=(e/this.scale[0]-u.width)/2,i=(r/this.scale[1]-u.height)/2;this.translate[0]+=h*p[0]*this.scale[0]/o[0],this.translate[1]+=i*p[1]*this.scale[1]/o[1]}return!0}fitViewAuto(t=!0){this.fitView(this.getBoundingRect(null,0,null,0),t),this.repaint()}getExtremes(t=null,n=null,e=null,r=null){let a=t,u=e,g=n,p=r;return this.datasets.forEach(o=>{let h=o.getExtremes();(a===null||a>h.minX)&&(a=h.minX),(u===null||u<h.maxX)&&(u=h.maxX),(g===null||g>h.minY)&&(g=h.minY),(p===null||p<h.maxY)&&(p=h.maxY)}),{minX:a,minY:g,maxX:u,maxY:p}}getBoundingRect(t=null,n=null,e=null,r=null){let{minX:a,minY:u,maxX:g,maxY:p}=this.getExtremes(),o=new DOMRect(a,u,g-a,p-u);return o.minX=a,o.minY=u,o.maxX=g,o.maxY=p,o}move(t){ct(this.translate,this.translate,t)}zoomAroundPoint(t,n){let e=this.translate,r=this.scale;ht(e,e,n,t),U(r,r,t,r)}repaint(){let t,n,e=this.options,r=this.ctx,a=this.elCanvas.width,u=this.elCanvas.height,g=this.scale,p=this.datasets;if(a<=0||u<=0||g[0]===0||g[1]===0)return;let o=e.canvasRatio*e.canvasPixelRatio,h=I(e.xCanvasStep*o,e.yCanvasStep*o),i=I(this.translate[0]*o,this.translate[1]*o),d=I(h[0]*g[0],h[1]*g[1]),R=I(e.xAxisStep,e.yAxisStep),k=I(1,1),s=I(e.xAxisSubdivisions,e.yAxisSubdivisions);for(;d[0]>h[0]*s[0];)d[0]/=s[0],k[0]/=s[0];for(;d[1]>h[1]*s[1];)d[1]/=s[1],k[1]/=s[1];for(;d[0]<h[0];)d[0]*=s[0],k[0]*=s[0];for(;d[1]<h[1];)d[1]*=s[1],k[1]*=s[1];let x=i[0]-(Math.floor(i[0]/d[0])+(i[0]>0?1:0))*d[0],m=i[1]-(Math.floor(i[1]/d[1])+(i[1]>0?1:0))*d[1],L=(y,w)=>{J(y,w,h),V(y,y,R),y[1]=-y[1],U(y,y,g,i)};e.clearFrame&&r.clearRect(0,0,a,u),r.fillStyle=e.backgroundColor,r.fillRect(0,0,a,u);let b=null;if(e.legends){let{createLegends:y,renderLegends:w}=e.legends,M=y(r,{width:a,height:u,pixelRatio:o,clip(A,T,v,X){a=v-A,u=X-T,b=new Path2D,b.rect(A,T,a,u)}},p,e,{isIntersects:Z});w(M)}b&&(r.save(),r.clip(b)),r.fillStyle=e.gridColor;for(let y=x;y<=a;y+=d[0])r.fillRect(y,0,1*o,u);for(let y=m;y<=u;y+=d[1])r.fillRect(0,y,a,1*o);r.fillStyle=e.axesColor,r.fillRect(i[0],0,1*o,u),r.fillRect(0,i[1],a,1*o);for(let y=0,w=p.length;y<w;y++){let M=p[y],{source:A,tree:T}=M;if(A.length>1){r.strokeStyle=M.options.lineColor,r.lineWidth=M.options.lineWidth*o;let v=I(),X=I(),O=(f,c,E)=>{if(L(X,[c.maxX,c.maxY]),X[0]<0||(L(v,[c.minX,c.minY]),v[0]>a))return;let P=Math.round(v[0]),N=Math.round(X[0]);if(P===N)f.beginPath(),f.setLineDash(M.options.lineDash.map(B=>B*o)),f.moveTo(P,v[1]),f.lineTo(N,X[1]),f.stroke();else if(c.left&&c.right)O(f,c.left,E),O(f,c.right,E);else{f.beginPath(),f.setLineDash(M.options.lineDash.map(B=>B*o)),L(v,E.at(c.s)),f.moveTo(v[0],v[1]);for(let B=c.s+1;B<=c.e;B++)L(v,E.at(B)),f.lineTo(v[0],v[1]);f.stroke()}f.setLineDash([])},C=(f,c,E)=>{if(L(X,[c.maxX,c.maxY]),X[0]<0||(L(v,[c.minX,c.minY]),v[0]>a))return;let P=Math.round(v[0]),N=Math.round(X[0]);if(P===N)f.beginPath(),f.setLineDash(M.options.lineDash.map(B=>B*o)),f.moveTo(P,v[1]),f.lineTo(N,X[1]),f.stroke();else if(c.left&&c.right)C(f,c.left,E),C(f,c.right,E);else{f.beginPath(),f.setLineDash(M.options.lineDash.map(W=>W*o)),L(v,E.at(c.s)),f.moveTo(v[0],v[1]);let B=v[1];for(let W=c.s+1;W<=c.e;W++)L(v,E.at(W)),f.lineTo(v[0],B),f.lineTo(v[0],v[1]),B=v[1];f.stroke()}f.setLineDash([])},S=2*Math.PI,Y=(f,c,E,P)=>{if(L(X,[c.maxX,c.maxY]),X[0]<0||(L(v,[c.minX,c.minY]),v[0]>a))return;let N=Math.round(v[0]),B=Math.round(X[0]);if(N===B)f.beginPath(),f.arc(N,v[1],P,0,S,!1),f.fill(),f.beginPath(),f.arc(B,X[1],P,0,S,!1),f.stroke();else if(c.left&&c.right)Y(f,c.left,E,P),Y(f,c.right,E,P);else{for(let W=c.s;W<=c.e;W++)L(v,E.at(W)),f.beginPath(),f.arc(v[0],v[1],P,0,S,!1),f.fill();f.stroke()}};M.options.isStepped?C(r,T,A):O(r,T,A);let D=M.options.pointRadius;D>0&&(r.fillStyle=M.options.lineColor,Y(r,T,A,D*o))}}if(e.xAxisLabelEnable||e.yAxisLabelEnable){let y=e.fontSize*o;if(r.font=`${y}px/1 ${e.fontFamily}`,r.fillStyle=e.axesColor,this.currentXBounds[0]=(0-i[0])/d[0]*k[0]*R[0],this.currentXBounds[1]=(a-i[0])/d[0]*k[0]*R[0],e.xAxisLabelEnable){let w=e.xAxisLabelXOffset*o,M=e.xAxisLabelYOffset*o,A=e.xAxisLabelMarkOffset*o,T=e.xAxisLabelMarkSize*o,v=e.xAxisLabelSpacing*o,X=v/2,O=[],C=!1,S=!1;for(let f=x;f<=a;f+=d[0]){let c=f-i[0],E=Math.round(c/d[0]),N=E*k[0]*R[0],B=e.xAxisLabelFormat(N),W=r.measureText(B),G={i:E,gridX:f,text:B,textMetrics:W,x:f-W.width/2+w,y:i[1]+y+M};O.push(G),G.y-y-M<0&&(C=!0),G.y+M>u&&(S=!0)}for(let f=0,c=O.length;f<c;f++){let E=O[f];n=E.y,e.xAxisLabelDynamicPosition&&(n=C?y+M:S?u-M:n);let P=new DOMRect(E.x-X,n-y,E.textMetrics.width+v,y);E.y=n,E.boundingRect=P}let Y=e.xAxisLabelJoiningStep,D=O;for(;yt(O);)O=D.filter(f=>_(Math.abs(f.i)%Y)),Y+=e.xAxisLabelJoiningStep;for(let f=0,c=O.length;f<c;f++){let E=O[f];!e.xAxisLabelDisplayZero&&E.i===0||(r.fillRect(E.gridX,i[1]+A,o,T),r.fillText(E.text,E.x,E.y))}}if(e.yAxisLabelEnable){let w=e.yAxisLabelXOffset*o,M=e.yAxisLabelYOffset*o,A=e.yAxisLabelMarkOffset*o,T=e.yAxisLabelMarkSize*o,v=e.yAxisLabelSpacing*o,X=v/2,O=[],C=0,S=!1,Y=!1;for(let c=m;c<=u;c+=d[1]){let E=i[1]-c,P=Math.round(E/d[1]),B=P*k[1]*R[1],W=e.yAxisLabelFormat(B),G=r.measureText(W),z={i:P,gridY:c,text:W,textMetrics:G,x:i[0]-G.width+w,y:c+y/2+M};O.push(z),C<G.width&&(C=G.width),z.x+w<0&&(S=!0),z.x+z.textMetrics.width-w>a&&(Y=!0)}for(let c=0,E=O.length;c<E;c++){let P=O[c];t=P.x,e.yAxisLabelDynamicPosition&&(t=S?C-P.textMetrics.width-w:Y?a-P.textMetrics.width+w:t);let N=new DOMRect(t,P.y-y-X,P.textMetrics.width,y+v);P.x=t,P.boundingRect=N}let D=e.yAxisLabelJoiningStep,f=O;for(;yt(O);)O=f.filter(c=>_(Math.abs(c.i)%D)),D+=e.yAxisLabelJoiningStep;O=O.filter(c=>c.boundingRect.bottom>0&&c.boundingRect.top<u),C=0,S=!1,Y=!1;for(let c=0,E=O.length;c<E;c++){let P=O[c];P.x=i[0]-P.textMetrics.width+w,C<P.textMetrics.width&&(C=P.textMetrics.width),P.x+w<0&&(S=!0),P.x+P.textMetrics.width-w>a&&(Y=!0)}for(let c=0,E=O.length;c<E;c++){let P=O[c];t=P.x,e.yAxisLabelDynamicPosition&&(t=S?C-P.textMetrics.width-w:Y?a-P.textMetrics.width+w:t),P.x=t}for(let c=0,E=O.length;c<E;c++){let P=O[c];!e.yAxisLabelDisplayZero&&P.i===0||(r.fillRect(i[0]+A,P.gridY,T,o),r.fillText(P.text,P.x,P.y))}}}if(e.hints){let{createHints:y,displaceHints:w,renderHints:M}=e.hints,A=y(r,this.focusPoint,{width:a,height:u,pixelRatio:o},p,e,{transform:L,isIntersects:Z});A=w(A),M(A)}b&&r.restore(),e.afterRepaint&&e.afterRepaint()}},At=ot;var lt=(l,t,n,e)=>{let r=n-t<=e,[a,u]=l.at(t),[g,p]=l.at(n),o,h;if(r)for(let i=t;i<=n;i++){let d=l.at(i)[1];u>d&&(u=d),p<d&&(p=d)}else{let i=Math.floor((n-t)/2),d=t+i;o=lt(l,t,d,e),h=lt(l,d,n,e),u=Math.min(o.minY,h.minY),p=Math.max(o.maxY,h.maxY)}return{s:t,e:n,minX:a,minY:u,maxX:g,maxY:p,left:o,right:h}},rt=class{constructor(t="",n={}){if("groupId"in n||(n.groupId=null),!("lineColor"in n)){let e=()=>Math.round(Math.random()*256);n.lineColor=`rgb(${e()},${e()},${e()})`}"isStepped"in n||(n.isStepped=!1),"lineWidth"in n||(n.lineWidth=1),"lineDash"in n||(n.lineDash=[]),"pointRadius"in n||(n.pointRadius=0),this.legend=t,this.options=n}compile(t,n){this.source=t,this.rebuild(n)}rebuild(t=100){let n=this.source,e=n.length;this.tree=e>0?lt(n,0,e-1,t):null}getExtremes(t=null,n=null,e=null,r=null){let a=t,u=e,g=n,p=r,{source:o}=this;for(let h=0,i=o.length;h<i;h++){let[d,R]=o.at(h);(a===null||a>d)&&(a=d),(u===null||u<d)&&(u=d),(g===null||g>R)&&(g=R),(p===null||p<R)&&(p=R)}return{minX:a,minY:g,maxX:u,maxY:p}}getBoundingRect(){let{minX:t,minY:n,maxX:e,maxY:r}=this.getExtremes(),a=new DOMRect(t,n,e-t,r-n);return a.minX=t,a.minY=n,a.maxX=e,a.maxY=r,a}},Tt=rt;export{At as Chart,Tt as Dataset};
//# sourceMappingURL=littlechart.min.js.map
