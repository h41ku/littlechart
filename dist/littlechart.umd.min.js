!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i=t();for(var n in i)("object"==typeof exports?exports:e)[n]=i[n]}}(self,(()=>(()=>{"use strict";var e={d:(t,i)=>{for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function i(e,t=.001){return Math.abs(e)<t}function n(e=0,t=0){return[e,t]}function s(e,t,i,n){return e[0]=t[0]*i[0]+n[0],e[1]=t[1]*i[1]+n[1],e}e.r(t),e.d(t,{Chart:()=>d,Dataset:()=>f});const l=e=>{e.preventDefault(),e.stopPropagation(),console.log("drop",e.type)},o="sim:pointerdown",a="sim:pointermove",r="sim:pointerup",c="sim:pointerzoom";class x{constructor(e,t=null){this.element=e,this.listenerElement=null!==t?t:e;const i=(e,t)=>this.element.dispatchEvent(new CustomEvent(e,{detail:t})),n=(e,t,n)=>i(o,{originalEvent:e,clientX:t,clientY:n}),s=(e,t,n)=>i(r,{originalEvent:e,clientX:t,clientY:n}),l=(e,t,n,s)=>i(c,{originalEvent:e,clientX:t,clientY:n,deltaScale:s}),x=(e,t,n,s,l)=>i(a,{originalEvent:e,clientX:t,clientY:n,movementX:s,movementY:l});let u=null,h=null,d={x:0,y:0},f={x:0,y:0};this.listeners={touchstart:e=>{let t;const i=e.target.getBoundingClientRect();if(null!==u){const l=e.changedTouches[0];if(l.identifier!==u){let o;h=l.identifier,f.x=l.clientX-i.left,f.y=l.clientY-i.top,o=s(e,d.x,d.y),!1===o&&(t=!1),o=n(e,d.x+(f.x-d.x)/2,d.y+(f.y-d.y)/2),!1===o&&(t=!1)}}else{const s=e.changedTouches[0];let l;u=s.identifier,d.x=s.clientX-i.left,d.y=s.clientY-i.top,l=n(e,d.x,d.y),!1===l&&(t=!1)}return!1===t&&(e.stopPropagation(),e.preventDefault()),t},touchend:e=>{let t,i=Array.from(e.changedTouches);if(null!==u&&null!==h){const l=i.find((e=>u===e.identifier)),o=i.find((e=>h===e.identifier));let a;a=s(e,d.x+(f.x-d.x)/2,d.y+(f.y-d.y)/2),!1===a&&(t=!1),l&&o?(u=null,h=null):l&&!o?(u=h,d.x=f.x,d.y=f.y,h=null):!l&&o&&(h=null),null!==u&&(a=n(e,d.x,d.y),!1===a&&(t=!1))}else if(null!==u&&i.find((e=>u===e.identifier))){let i;u=null,i=s(e,d.x,d.y),!1===i&&(t=!1)}return!1===t&&(e.stopPropagation(),e.preventDefault()),t},touchmove:e=>{let t;const i=e.target.getBoundingClientRect();if(null!==u&&null!==h){const o={x:d.x,y:d.y},a={x:f.x,y:f.y},r=Array.from(e.changedTouches).find((e=>u===e.identifier)),c=Array.from(e.changedTouches).find((e=>h===e.identifier));r&&(o.x=r.clientX-i.left,o.y=r.clientY-i.top),c&&(a.x=c.clientX-i.left,a.y=c.clientY-i.top);const y=f.x-d.x,p=f.y-d.y,b=a.x-o.x,m=a.y-o.y,v=1-Math.hypot(y,p)/Math.hypot(b,m),g={x:d.x+y/2,y:d.y+p/2},A={x:o.x+b/2,y:o.y+m/2};let L;L=x(e,A.x,A.y,A.x-g.x,A.y-g.y),!1===L&&(t=!1),L=s(e,A.x,A.y),!1===L&&(t=!1),L=l(e,A.x,A.y,v),!1===L&&(t=!1),L=n(e,A.x,A.y),!1===L&&(t=!1),d.x=o.x,d.y=o.y,f.x=a.x,f.y=a.y}else if(null!==u){const n={x:d.x,y:d.y},s=Array.from(e.changedTouches).find((e=>u===e.identifier));if(!s)return;let l;n.x=s.clientX-i.left,n.y=s.clientY-i.top,l=x(e,n.x,n.y,n.x-d.x,n.y-d.y),!1===l&&(t=!1),d.x=n.x,d.y=n.y}return!1===t&&(e.stopPropagation(),e.preventDefault()),t},mousedown:e=>{d.x=e.clientX,d.y=e.clientY;let t=n(e,d.x,d.y);return!1===t&&(e.stopPropagation(),e.preventDefault()),t},mouseup:e=>{d.x=e.clientX,d.y=e.clientY;let t=s(e,d.x,d.y);return!1===t&&(e.stopPropagation(),e.preventDefault()),t},mousemove:e=>{let t={x:e.clientX,y:e.clientY},i=x(e,t.x,t.y,t.x-d.x,t.y-d.y);return d.x=t.x,d.y=t.y,!1===i&&(e.stopPropagation(),e.preventDefault()),i},wheel:e=>{let t=.1*(e.deltaY>0?1:-1),i=l(e,e.clientX,e.clientY,t);return!1===i&&(e.stopPropagation(),e.preventDefault()),i}}}enableNativeGestures(){document.removeEventListener("gesturestart",l),document.removeEventListener("gesturechange",l),document.removeEventListener("gestureend",l)}disableNativeGestures(){document.addEventListener("gesturestart",l),document.addEventListener("gesturechange",l),document.addEventListener("gestureend",l)}enableTouchGestures(){this.listenerElement.addEventListener("touchstart",this.listeners.touchstart),document.addEventListener("touchend",this.listeners.touchend),document.addEventListener("touchmove",this.listeners.touchmove)}disableTouchGestures(){this.listenerElement.removeEventListener("touchstart",this.listeners.touchstart),document.removeEventListener("touchend",this.listeners.touchend),document.removeEventListener("touchmove",this.listeners.touchmove)}enableMouseGestures(){this.listenerElement.addEventListener("mousedown",this.listeners.mousedown),document.addEventListener("mouseup",this.listeners.mouseup),document.addEventListener("mousemove",this.listeners.mousemove),this.listenerElement.addEventListener("wheel",this.listeners.wheel),document.addEventListener("mouseleave",this.listeners.mouseup)}disableMouseGestures(){this.listenerElement.removeEventListener("mousedown",this.listeners.mousedown),document.removeEventListener("mouseup",this.listeners.mouseup),document.removeEventListener("mousemove",this.listeners.mousemove),document.removeEventListener("wheel",this.listeners.wheel),document.removeEventListener("mouseleave",this.listeners.mouseup)}}x.EVT_NAME_POINTERDOWN=o,x.EVT_NAME_POINTERMOVE=a,x.EVT_NAME_POINTERUP=r,x.EVT_NAME_POINTERZOOM=c;const u=x;function h(e){const t=e.length;for(let s=0;s<t;s++)for(let l=0;l<t;l++)if(s!==l&&(i=e[s].boundingRect,n=e[l].boundingRect,i.bottom>n.top&&i.right>n.left&&i.top<n.bottom&&i.left<n.right))return!0;var i,n;return!1}const d=class{constructor(e,t={}){"xCanvasStep"in t||(t.xCanvasStep=25),"yCanvasStep"in t||(t.yCanvasStep=25),"xAxisStep"in t||(t.xAxisStep=1),"yAxisStep"in t||(t.yAxisStep=1),"xOffset"in t||(t.xOffset=0),"yOffset"in t||(t.yOffset=0),"xScale"in t||(t.xScale=1),"yScale"in t||(t.yScale=1),"xAxisSubdivisions"in t||(t.xAxisSubdivisions=10),"yAxisSubdivisions"in t||(t.yAxisSubdivisions=10),"fontSize"in t||(t.fontSize=15),"fontFamily"in t||(t.fontFamily="monospace"),"xAxisLabelXOffset"in t||(t.xAxisLabelXOffset=0),"xAxisLabelYOffset"in t||(t.xAxisLabelYOffset=0),"xAxisLabelDynamicPosition"in t||(t.xAxisLabelDynamicPosition=!0),"xAxisLabelSpacing"in t||(t.xAxisLabelSpacing=t.fontSize),"xAxisLabelFormat"in t||(t.xAxisLabelFormat=e=>e.toFixed(4)),"xAxisLabelJoiningStep"in t||(t.xAxisLabelJoiningStep=5),"xAxisLabelMarkOffset"in t||(t.xAxisLabelMarkOffset=-2),"xAxisLabelMarkSize"in t||(t.xAxisLabelMarkSize=4),"xAxisLabelDisplayZero"in t||(t.xAxisLabelDisplayZero=!0),"xAxisLabelEnable"in t||(t.xAxisLabelEnable=!0),"yAxisLabelXOffset"in t||(t.yAxisLabelXOffset=0),"yAxisLabelYOffset"in t||(t.yAxisLabelYOffset=0),"yAxisLabelDynamicPosition"in t||(t.yAxisLabelDynamicPosition=!0),"yAxisLabelSpacing"in t||(t.yAxisLabelSpacing=0),"yAxisLabelFormat"in t||(t.yAxisLabelFormat=e=>e.toFixed(4)),"yAxisLabelJoiningStep"in t||(t.yAxisLabelJoiningStep=5),"yAxisLabelMarkOffset"in t||(t.yAxisLabelMarkOffset=-2),"yAxisLabelMarkSize"in t||(t.yAxisLabelMarkSize=4),"yAxisLabelDisplayZero"in t||(t.yAxisLabelDisplayZero=!0),"yAxisLabelEnable"in t||(t.yAxisLabelEnable=!0),"backgroundColor"in t||(t.backgroundColor="#ffffff"),"gridColor"in t||(t.gridColor="rgba(0,0,0,0.1)"),"axesColor"in t||(t.axesColor="rgba(0,0,0,0.5)"),"userTranslateX"in t||(t.userTranslateX=!0),"userTranslateY"in t||(t.userTranslateY=!0),"userScaleX"in t||(t.userScaleX=!0),"userScaleY"in t||(t.userScaleY=!0),"canvasRatio"in t||(t.canvasRatio=1),"canvasPixelRatio"in t||(t.canvasPixelRatio=1),"clearFrame"in t||(t.clearFrame=!1),"bindEventHandlers"in t||(t.bindEventHandlers=!0),this.options=t,this.elCanvas=e,this.ctx=e.getContext("2d"),this.scale=n(t.xScale,t.yScale),this.translate=n(t.xOffset,t.yOffset),this.datasets=[];const i={down:!1,pt0:n(0,0),pt:n(0,0),delta:n(0,0)},s=(i,n)=>{const s=e.getBoundingClientRect();i[0]=(n.clientX-s.left)/t.canvasRatio,i[1]=(n.clientY-s.top)/t.canvasRatio};this.isListening=!1,this.listeners={},this.listeners[u.EVT_NAME_POINTERDOWN]=e=>{e.detail.originalEvent.preventDefault(),i.down=!0,s(i.pt0,e.detail)},this.listeners[u.EVT_NAME_POINTERUP]=e=>{i.down=!1},this.listeners[u.EVT_NAME_POINTERMOVE]=e=>{if(i.down){s(i.pt,e.detail),l=i.delta,o=i.pt,a=i.pt0,l[0]=o[0]-a[0],l[1]=o[1]-a[1],function(e,t){e[0]=t[0],e[1]=t[1]}(i.pt0,i.pt);const r=n(t.userTranslateX?i.delta[0]:0,t.userTranslateY?i.delta[1]:0);this.move(r),this.repaint()}var l,o,a},this.listeners[u.EVT_NAME_POINTERZOOM]=e=>{e.detail.originalEvent.preventDefault();const l=e.detail.deltaScale,o=n(t.userScaleX?l:0,t.userScaleY?l:0);s(i.pt,e.detail),this.zoomAroundPoint(o,i.pt),this.repaint()},this.touchGestures=new u(e),t.bindEventHandlers&&this.bind()}bind(){if(!this.isListening){for(let e in this.listeners)this.elCanvas.addEventListener(e,this.listeners[e]);this.touchGestures.enableTouchGestures(),this.touchGestures.enableMouseGestures(),this.isListening=!0}}unbind(){if(this.isListening){for(let e in this.listeners)this.elCanvas.removeEventListener(e,this.listeners[e]);this.touchGestures.disableTouchGestures(),this.touchGestures.disableMouseGestures(),this.isListening=!1}}fitView(e,t=!0){let i=this.elCanvas.width,s=this.elCanvas.height;if(i<=0||s<=0||Math.abs(e.width)<=0||Math.abs(e.height)<=0)return!1;const l=new DOMRect(e.x,-e.y-e.height,e.width,e.height),o=this.options,a=o.canvasRatio*o.canvasPixelRatio,r=n(o.xCanvasStep,o.yCanvasStep),c=n(o.xAxisStep,o.yAxisStep);if(i=i/a/r[0]*c[0],s=s/a/r[1]*c[1],this.scale[0]=i/l.width,this.scale[1]=s/l.height,t&&(this.scale[1]>this.scale[0]?this.scale[1]=this.scale[0]:this.scale[0]=this.scale[1]),this.translate[0]=-l.x/c[0]*r[0]*this.scale[0],this.translate[1]=-l.y/c[1]*r[1]*this.scale[1],t){const e=(i/this.scale[0]-l.width)/2,t=(s/this.scale[1]-l.height)/2;this.translate[0]+=e*r[0]*this.scale[0]/c[0],this.translate[1]+=t*r[1]*this.scale[1]/c[1]}return!0}fitViewAuto(e=!0){this.fitView(this.getBoundingRect(null,0,null,0),e),this.repaint()}getBoundingRect(e=null,t=null,i=null,n=null){let s=e,l=i,o=t,a=n;for(let e=0,t=this.datasets.length;e<t;e++)for(let t=0,i=this.datasets[e].points,n=i.length;t<n;t++){const[e,n]=i[t];(null===s||s>e)&&(s=e),(null===l||l<e)&&(l=e),(null===o||o>n)&&(o=n),(null===a||a<n)&&(a=n)}const r=new DOMRect(s,o,l-s,a-o);return r.minX=s,r.minY=o,r.maxX=l,r.maxY=a,r}move(e){var t,i,n;t=this.translate,i=this.translate,n=e,t[0]=i[0]+n[0],t[1]=i[1]+n[1]}zoomAroundPoint(e,t){const i=this.translate,n=this.scale;!function(e,t,i,n){e[0]=t[0]-n[0]*(i[0]-t[0]),e[1]=t[1]-n[1]*(i[1]-t[1])}(i,i,t,e),s(n,n,e,n)}repaint(){let e,t;const l=this.options,o=this.ctx,a=this.elCanvas.width,r=this.elCanvas.height,c=this.scale;if(a<=0||r<=0||0===c[0]||0===c[1])return;const x=l.canvasRatio*l.canvasPixelRatio,u=n(l.xCanvasStep*x,l.yCanvasStep*x),d=n(this.translate[0]*x,this.translate[1]*x),f=n(u[0]*c[0],u[1]*c[1]),y=n(l.xAxisStep,l.yAxisStep),p=n(1,1),b=n(l.xAxisSubdivisions,l.yAxisSubdivisions);for(;f[0]>u[0]*b[0];)f[0]/=b[0],p[0]/=b[0];for(;f[1]>u[1]*b[1];)f[1]/=b[1],p[1]/=b[1];for(;f[0]<u[0];)f[0]*=b[0],p[0]*=b[0];for(;f[1]<u[1];)f[1]*=b[1],p[1]*=b[1];const m=d[0]-(Math.floor(d[0]/f[0])+(d[0]>0?1:0))*f[0],v=d[1]-(Math.floor(d[1]/f[1])+(d[1]>0?1:0))*f[1];l.clearFrame&&o.clearRect(0,0,a,r),o.fillStyle=l.backgroundColor,o.fillRect(0,0,a,r),o.fillStyle=l.gridColor;for(let e=m;e<=a;e+=f[0])o.fillRect(e,0,1*x,r);for(let e=v;e<=r;e+=f[1])o.fillRect(0,e,a,1*x);o.fillStyle=l.axesColor,o.fillRect(d[0],0,1*x,r),o.fillRect(0,d[1],a,1*x);const g=(e,t)=>{!function(e,t,i){e[0]=t[0]*i[0],e[1]=t[1]*i[1]}(e,t,u),function(e,t,i){e[0]=t[0]/i[0],e[1]=t[1]/i[1]}(e,e,y),e[1]=-e[1],s(e,e,c,d)},A=n();for(let e=0,i=this.datasets.length;e<i;e++){const i=this.datasets[e],n=i.points,s=n.length;if(s>1){if(o.strokeStyle=i.options.lineColor,o.lineWidth=i.options.lineWidth*x,o.beginPath(),g(A,n[0]),o.moveTo(A[0],A[1]),i.options.isStepped){t=A[1];for(let e=1;e<s;e++)g(A,n[e]),o.lineTo(A[0],t),o.lineTo(A[0],A[1]),t=A[1]}else for(let e=1;e<s;e++)g(A,n[e]),o.lineTo(A[0],A[1]);o.stroke()}}if(l.xAxisLabelEnable||l.yAxisLabelEnable){const n=l.fontSize*x;if(o.font=`${n}px/1 ${l.fontFamily}`,o.fillStyle=l.axesColor,l.xAxisLabelEnable){const e=l.xAxisLabelXOffset*x,s=l.xAxisLabelYOffset*x,c=l.xAxisLabelMarkOffset*x,u=l.xAxisLabelMarkSize*x,b=l.xAxisLabelSpacing*x,v=b/2;let g=[],A=!1,L=!1;for(let t=m;t<=a;t+=f[0]){const i=t-d[0],a=Math.round(i/f[0]),c=a*p[0]*y[0],x=l.xAxisLabelFormat(c),u=o.measureText(x),h={i:a,gridX:t,text:x,textMetrics:u,x:t-u.width/2+e,y:d[1]+n+s};g.push(h),h.y-n-s<0&&(A=!0),h.y+s>r&&(L=!0)}for(let e=0,i=g.length;e<i;e++){const i=g[e];t=i.y,l.xAxisLabelDynamicPosition&&(t=A?n+s:L?r-s:t);const o=new DOMRect(i.x-v,t-n,i.textMetrics.width+b,n);i.y=t,i.boundingRect=o}let E=l.xAxisLabelJoiningStep,S=g;for(;h(g);)g=S.filter((e=>i(Math.abs(e.i)%E))),E+=l.xAxisLabelJoiningStep;for(let e=0,t=g.length;e<t;e++){const t=g[e];(l.xAxisLabelDisplayZero||0!==t.i)&&(o.fillRect(t.gridX,d[1]+c,x,u),o.fillText(t.text,t.x,t.y))}}if(l.yAxisLabelEnable){const t=l.yAxisLabelXOffset*x,s=l.yAxisLabelYOffset*x,c=l.yAxisLabelMarkOffset*x,u=l.yAxisLabelMarkSize*x,b=l.yAxisLabelSpacing*x,m=b/2;let g=[],A=0,L=!1,E=!1;for(let e=v;e<=r;e+=f[1]){const i=d[1]-e,r=Math.round(i/f[1]),c=r*p[1]*y[1],x=l.yAxisLabelFormat(c),u=o.measureText(x),h={i:r,gridY:e,text:x,textMetrics:u,x:d[0]-u.width+t,y:e+n/2+s};g.push(h),A<u.width&&(A=u.width),h.x+t<0&&(L=!0),h.x+h.textMetrics.width-t>a&&(E=!0)}for(let i=0,s=g.length;i<s;i++){const s=g[i];e=s.x,l.yAxisLabelDynamicPosition&&(e=L?A-s.textMetrics.width-t:E?a-s.textMetrics.width+t:e);const o=new DOMRect(e,s.y-n-m,s.textMetrics.width,n+b);s.x=e,s.boundingRect=o}let S=l.yAxisLabelJoiningStep,M=g;for(;h(g);)g=M.filter((e=>i(Math.abs(e.i)%S))),S+=l.yAxisLabelJoiningStep;g=g.filter((e=>e.boundingRect.bottom>0&&e.boundingRect.top<r)),A=0,L=!1,E=!1;for(let e=0,i=g.length;e<i;e++){const i=g[e];i.x=d[0]-i.textMetrics.width+t,A<i.textMetrics.width&&(A=i.textMetrics.width),i.x+t<0&&(L=!0),i.x+i.textMetrics.width-t>a&&(E=!0)}for(let i=0,n=g.length;i<n;i++){const n=g[i];e=n.x,l.yAxisLabelDynamicPosition&&(e=L?A-n.textMetrics.width-t:E?a-n.textMetrics.width+t:e),n.x=e}for(let e=0,t=g.length;e<t;e++){const t=g[e];(l.yAxisLabelDisplayZero||0!==t.i)&&(o.fillRect(d[0]+c,t.gridY,u,x),o.fillText(t.text,t.x,t.y))}}}}},f=class{constructor(e={}){if(!("lineColor"in e)){const t=()=>Math.round(256*Math.random());e.lineColor=`rgb(${t()},${t()},${t()})`}"isStepped"in e||(e.isStepped=!1),"lineWidth"in e||(e.lineWidth=1),this.options=e,this.points=[]}getBoundingRect(){let e=null,t=null,i=null,n=null;for(let s=0,l=this.points,o=l.length;s<o;s++){const[o,a]=l[s];(null===e||e>o)&&(e=o),(null===t||t<o)&&(t=o),(null===i||i>a)&&(i=a),(null===n||n<a)&&(n=a)}const s=new DOMRect(e,i,t-e,n-i);return s.minX=e,s.minY=i,s.maxX=t,s.maxY=n,s}};return t})()));