var e={d:(t,i)=>{for(var s in i)e.o(i,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};function i(e,t=.001){return Math.abs(e)<t}function s(e=0,t=0){return[e,t]}function n(e,t,i,s){return e[0]=t[0]*i[0]+s[0],e[1]=t[1]*i[1]+s[1],e}e.d(t,{k:()=>d,q:()=>f});const l=e=>{e.preventDefault(),e.stopPropagation(),console.log("drop",e.type)},a="sim:pointerdown",o="sim:pointermove",r="sim:pointerup",c="sim:pointerzoom";class x{constructor(e,t=null){this.element=e,this.listenerElement=null!==t?t:e;const i=(e,t)=>this.element.dispatchEvent(new CustomEvent(e,{detail:t})),s=(e,t,s)=>i(a,{originalEvent:e,clientX:t,clientY:s}),n=(e,t,s)=>i(r,{originalEvent:e,clientX:t,clientY:s}),l=(e,t,s,n)=>i(c,{originalEvent:e,clientX:t,clientY:s,deltaScale:n}),x=(e,t,s,n,l)=>i(o,{originalEvent:e,clientX:t,clientY:s,movementX:n,movementY:l});let u=null,h=null,d={x:0,y:0},f={x:0,y:0};this.listeners={touchstart:e=>{let t;const i=e.target.getBoundingClientRect();if(null!==u){const l=e.changedTouches[0];if(l.identifier!==u){let a;h=l.identifier,f.x=l.clientX-i.left,f.y=l.clientY-i.top,a=n(e,d.x,d.y),!1===a&&(t=!1),a=s(e,d.x+(f.x-d.x)/2,d.y+(f.y-d.y)/2),!1===a&&(t=!1)}}else{const n=e.changedTouches[0];let l;u=n.identifier,d.x=n.clientX-i.left,d.y=n.clientY-i.top,l=s(e,d.x,d.y),!1===l&&(t=!1)}return!1===t&&(e.stopPropagation(),e.preventDefault()),t},touchend:e=>{let t,i=Array.from(e.changedTouches);if(null!==u&&null!==h){const l=i.find((e=>u===e.identifier)),a=i.find((e=>h===e.identifier));let o;o=n(e,d.x+(f.x-d.x)/2,d.y+(f.y-d.y)/2),!1===o&&(t=!1),l&&a?(u=null,h=null):l&&!a?(u=h,d.x=f.x,d.y=f.y,h=null):!l&&a&&(h=null),null!==u&&(o=s(e,d.x,d.y),!1===o&&(t=!1))}else if(null!==u&&i.find((e=>u===e.identifier))){let i;u=null,i=n(e,d.x,d.y),!1===i&&(t=!1)}return!1===t&&(e.stopPropagation(),e.preventDefault()),t},touchmove:e=>{let t;const i=e.target.getBoundingClientRect();if(null!==u&&null!==h){const a={x:d.x,y:d.y},o={x:f.x,y:f.y},r=Array.from(e.changedTouches).find((e=>u===e.identifier)),c=Array.from(e.changedTouches).find((e=>h===e.identifier));r&&(a.x=r.clientX-i.left,a.y=r.clientY-i.top),c&&(o.x=c.clientX-i.left,o.y=c.clientY-i.top);const y=f.x-d.x,p=f.y-d.y,m=o.x-a.x,b=o.y-a.y,v=1-Math.hypot(y,p)/Math.hypot(m,b),g={x:d.x+y/2,y:d.y+p/2},A={x:a.x+m/2,y:a.y+b/2};let L;L=x(e,A.x,A.y,A.x-g.x,A.y-g.y),!1===L&&(t=!1),L=n(e,A.x,A.y),!1===L&&(t=!1),L=l(e,A.x,A.y,v),!1===L&&(t=!1),L=s(e,A.x,A.y),!1===L&&(t=!1),d.x=a.x,d.y=a.y,f.x=o.x,f.y=o.y}else if(null!==u){const s={x:d.x,y:d.y},n=Array.from(e.changedTouches).find((e=>u===e.identifier));if(!n)return;let l;s.x=n.clientX-i.left,s.y=n.clientY-i.top,l=x(e,s.x,s.y,s.x-d.x,s.y-d.y),!1===l&&(t=!1),d.x=s.x,d.y=s.y}return!1===t&&(e.stopPropagation(),e.preventDefault()),t},mousedown:e=>{d.x=e.clientX,d.y=e.clientY;let t=s(e,d.x,d.y);return!1===t&&(e.stopPropagation(),e.preventDefault()),t},mouseup:e=>{d.x=e.clientX,d.y=e.clientY;let t=n(e,d.x,d.y);return!1===t&&(e.stopPropagation(),e.preventDefault()),t},mousemove:e=>{let t={x:e.clientX,y:e.clientY},i=x(e,t.x,t.y,t.x-d.x,t.y-d.y);return d.x=t.x,d.y=t.y,!1===i&&(e.stopPropagation(),e.preventDefault()),i},wheel:e=>{let t=.1*(e.deltaY>0?1:-1),i=l(e,e.clientX,e.clientY,t);return!1===i&&(e.stopPropagation(),e.preventDefault()),i}}}enableNativeGestures(){document.removeEventListener("gesturestart",l),document.removeEventListener("gesturechange",l),document.removeEventListener("gestureend",l)}disableNativeGestures(){document.addEventListener("gesturestart",l),document.addEventListener("gesturechange",l),document.addEventListener("gestureend",l)}enableTouchGestures(){this.listenerElement.addEventListener("touchstart",this.listeners.touchstart),document.addEventListener("touchend",this.listeners.touchend),document.addEventListener("touchmove",this.listeners.touchmove)}disableTouchGestures(){this.listenerElement.removeEventListener("touchstart",this.listeners.touchstart),document.removeEventListener("touchend",this.listeners.touchend),document.removeEventListener("touchmove",this.listeners.touchmove)}enableMouseGestures(){this.listenerElement.addEventListener("mousedown",this.listeners.mousedown),document.addEventListener("mouseup",this.listeners.mouseup),document.addEventListener("mousemove",this.listeners.mousemove),this.listenerElement.addEventListener("wheel",this.listeners.wheel),document.addEventListener("mouseleave",this.listeners.mouseup)}disableMouseGestures(){this.listenerElement.removeEventListener("mousedown",this.listeners.mousedown),document.removeEventListener("mouseup",this.listeners.mouseup),document.removeEventListener("mousemove",this.listeners.mousemove),document.removeEventListener("wheel",this.listeners.wheel),document.removeEventListener("mouseleave",this.listeners.mouseup)}}x.EVT_NAME_POINTERDOWN=a,x.EVT_NAME_POINTERMOVE=o,x.EVT_NAME_POINTERUP=r,x.EVT_NAME_POINTERZOOM=c;const u=x;function h(e){const t=e.length;for(let n=0;n<t;n++)for(let l=0;l<t;l++)if(n!==l&&(i=e[n].boundingRect,s=e[l].boundingRect,i.bottom>s.top&&i.right>s.left&&i.top<s.bottom&&i.left<s.right))return!0;var i,s;return!1}const d=class{constructor(e,t={}){"xCanvasStep"in t||(t.xCanvasStep=25),"yCanvasStep"in t||(t.yCanvasStep=25),"xAxisStep"in t||(t.xAxisStep=1),"yAxisStep"in t||(t.yAxisStep=1),"xOffset"in t||(t.xOffset=0),"yOffset"in t||(t.yOffset=0),"xScale"in t||(t.xScale=1),"yScale"in t||(t.yScale=1),"xAxisSubdivisions"in t||(t.xAxisSubdivisions=10),"yAxisSubdivisions"in t||(t.yAxisSubdivisions=10),"fontSize"in t||(t.fontSize=15),"fontFamily"in t||(t.fontFamily="monospace"),"xAxisLabelXOffset"in t||(t.xAxisLabelXOffset=0),"xAxisLabelYOffset"in t||(t.xAxisLabelYOffset=0),"xAxisLabelDynamicPosition"in t||(t.xAxisLabelDynamicPosition=!0),"xAxisLabelSpacing"in t||(t.xAxisLabelSpacing=t.fontSize),"xAxisLabelFormat"in t||(t.xAxisLabelFormat=e=>e.toFixed(4)),"xAxisLabelJoiningStep"in t||(t.xAxisLabelJoiningStep=5),"xAxisLabelMarkOffset"in t||(t.xAxisLabelMarkOffset=-2),"xAxisLabelMarkSize"in t||(t.xAxisLabelMarkSize=4),"xAxisLabelDisplayZero"in t||(t.xAxisLabelDisplayZero=!0),"xAxisLabelEnable"in t||(t.xAxisLabelEnable=!0),"yAxisLabelXOffset"in t||(t.yAxisLabelXOffset=0),"yAxisLabelYOffset"in t||(t.yAxisLabelYOffset=0),"yAxisLabelDynamicPosition"in t||(t.yAxisLabelDynamicPosition=!0),"yAxisLabelSpacing"in t||(t.yAxisLabelSpacing=0),"yAxisLabelFormat"in t||(t.yAxisLabelFormat=e=>e.toFixed(4)),"yAxisLabelJoiningStep"in t||(t.yAxisLabelJoiningStep=5),"yAxisLabelMarkOffset"in t||(t.yAxisLabelMarkOffset=-2),"yAxisLabelMarkSize"in t||(t.yAxisLabelMarkSize=4),"yAxisLabelDisplayZero"in t||(t.yAxisLabelDisplayZero=!0),"yAxisLabelEnable"in t||(t.yAxisLabelEnable=!0),"backgroundColor"in t||(t.backgroundColor="#ffffff"),"gridColor"in t||(t.gridColor="rgba(0,0,0,0.1)"),"axesColor"in t||(t.axesColor="rgba(0,0,0,0.5)"),"userTranslateX"in t||(t.userTranslateX=!0),"userTranslateY"in t||(t.userTranslateY=!0),"userScaleX"in t||(t.userScaleX=!0),"userScaleY"in t||(t.userScaleY=!0),"canvasRatio"in t||(t.canvasRatio=1),"canvasPixelRatio"in t||(t.canvasPixelRatio=1),"clearFrame"in t||(t.clearFrame=!1),"bindEventHandlers"in t||(t.bindEventHandlers=!0),this.options=t,this.elCanvas=e,this.ctx=e.getContext("2d"),this.scale=s(t.xScale,t.yScale),this.translate=s(t.xOffset,t.yOffset),this.datasets=[];const i={down:!1,pt0:s(0,0),pt:s(0,0),delta:s(0,0)},n=(i,s)=>{const n=e.getBoundingClientRect();i[0]=(s.clientX-n.left)/t.canvasRatio,i[1]=(s.clientY-n.top)/t.canvasRatio};this.isListening=!1,this.listeners={},this.listeners[u.EVT_NAME_POINTERDOWN]=e=>{e.detail.originalEvent.preventDefault(),i.down=!0,n(i.pt0,e.detail)},this.listeners[u.EVT_NAME_POINTERUP]=e=>{i.down=!1},this.listeners[u.EVT_NAME_POINTERMOVE]=e=>{if(i.down){n(i.pt,e.detail),l=i.delta,a=i.pt,o=i.pt0,l[0]=a[0]-o[0],l[1]=a[1]-o[1],function(e,t){e[0]=t[0],e[1]=t[1]}(i.pt0,i.pt);const r=s(t.userTranslateX?i.delta[0]:0,t.userTranslateY?i.delta[1]:0);this.move(r),this.repaint()}var l,a,o},this.listeners[u.EVT_NAME_POINTERZOOM]=e=>{e.detail.originalEvent.preventDefault();const l=e.detail.deltaScale,a=s(t.userScaleX?l:0,t.userScaleY?l:0);n(i.pt,e.detail),this.zoomAroundPoint(a,i.pt),this.repaint()},this.touchGestures=new u(e),t.bindEventHandlers&&this.bind()}bind(){if(!this.isListening){for(let e in this.listeners)this.elCanvas.addEventListener(e,this.listeners[e]);this.touchGestures.enableTouchGestures(),this.touchGestures.enableMouseGestures(),this.isListening=!0}}unbind(){if(this.isListening){for(let e in this.listeners)this.elCanvas.removeEventListener(e,this.listeners[e]);this.touchGestures.disableTouchGestures(),this.touchGestures.disableMouseGestures(),this.isListening=!1}}fitView(e,t=!0){let i=this.elCanvas.width,n=this.elCanvas.height;if(i<=0||n<=0||Math.abs(e.width)<=0||Math.abs(e.height)<=0)return!1;const l=new DOMRect(e.x,-e.y-e.height,e.width,e.height),a=this.options,o=a.canvasRatio*a.canvasPixelRatio,r=s(a.xCanvasStep,a.yCanvasStep),c=s(a.xAxisStep,a.yAxisStep);if(i=i/o/r[0]*c[0],n=n/o/r[1]*c[1],this.scale[0]=i/l.width,this.scale[1]=n/l.height,t&&(this.scale[1]>this.scale[0]?this.scale[1]=this.scale[0]:this.scale[0]=this.scale[1]),this.translate[0]=-l.x/c[0]*r[0]*this.scale[0],this.translate[1]=-l.y/c[1]*r[1]*this.scale[1],t){const e=(i/this.scale[0]-l.width)/2,t=(n/this.scale[1]-l.height)/2;this.translate[0]+=e*r[0]*this.scale[0]/c[0],this.translate[1]+=t*r[1]*this.scale[1]/c[1]}return!0}fitViewAuto(e=!0){this.fitView(this.getBoundingRect(null,0,null,0),e),this.repaint()}getBoundingRect(e=null,t=null,i=null,s=null){let n=e,l=i,a=t,o=s;for(let e=0,t=this.datasets.length;e<t;e++)for(let t=0,i=this.datasets[e].points,s=i.length;t<s;t++){const[e,s]=i[t];(null===n||n>e)&&(n=e),(null===l||l<e)&&(l=e),(null===a||a>s)&&(a=s),(null===o||o<s)&&(o=s)}const r=new DOMRect(n,a,l-n,o-a);return r.minX=n,r.minY=a,r.maxX=l,r.maxY=o,r}move(e){var t,i,s;t=this.translate,i=this.translate,s=e,t[0]=i[0]+s[0],t[1]=i[1]+s[1]}zoomAroundPoint(e,t){const i=this.translate,s=this.scale;!function(e,t,i,s){e[0]=t[0]-s[0]*(i[0]-t[0]),e[1]=t[1]-s[1]*(i[1]-t[1])}(i,i,t,e),n(s,s,e,s)}repaint(){let e,t;const l=this.options,a=this.ctx,o=this.elCanvas.width,r=this.elCanvas.height,c=this.scale;if(o<=0||r<=0||0===c[0]||0===c[1])return;const x=l.canvasRatio*l.canvasPixelRatio,u=s(l.xCanvasStep*x,l.yCanvasStep*x),d=s(this.translate[0]*x,this.translate[1]*x),f=s(u[0]*c[0],u[1]*c[1]),y=s(l.xAxisStep,l.yAxisStep),p=s(1,1),m=s(l.xAxisSubdivisions,l.yAxisSubdivisions);for(;f[0]>u[0]*m[0];)f[0]/=m[0],p[0]/=m[0];for(;f[1]>u[1]*m[1];)f[1]/=m[1],p[1]/=m[1];for(;f[0]<u[0];)f[0]*=m[0],p[0]*=m[0];for(;f[1]<u[1];)f[1]*=m[1],p[1]*=m[1];const b=d[0]-(Math.floor(d[0]/f[0])+(d[0]>0?1:0))*f[0],v=d[1]-(Math.floor(d[1]/f[1])+(d[1]>0?1:0))*f[1];l.clearFrame&&a.clearRect(0,0,o,r),a.fillStyle=l.backgroundColor,a.fillRect(0,0,o,r),a.fillStyle=l.gridColor;for(let e=b;e<=o;e+=f[0])a.fillRect(e,0,1*x,r);for(let e=v;e<=r;e+=f[1])a.fillRect(0,e,o,1*x);a.fillStyle=l.axesColor,a.fillRect(d[0],0,1*x,r),a.fillRect(0,d[1],o,1*x);const g=(e,t)=>{!function(e,t,i){e[0]=t[0]*i[0],e[1]=t[1]*i[1]}(e,t,u),function(e,t,i){e[0]=t[0]/i[0],e[1]=t[1]/i[1]}(e,e,y),e[1]=-e[1],n(e,e,c,d)},A=s();for(let e=0,i=this.datasets.length;e<i;e++){const i=this.datasets[e],s=i.points,n=s.length;if(n>1){if(a.strokeStyle=i.options.lineColor,a.lineWidth=i.options.lineWidth*x,a.beginPath(),g(A,s[0]),a.moveTo(A[0],A[1]),i.options.isStepped){t=A[1];for(let e=1;e<n;e++)g(A,s[e]),a.lineTo(A[0],t),a.lineTo(A[0],A[1]),t=A[1]}else for(let e=1;e<n;e++)g(A,s[e]),a.lineTo(A[0],A[1]);a.stroke()}}if(l.xAxisLabelEnable||l.yAxisLabelEnable){const s=l.fontSize*x;if(a.font=`${s}px/1 ${l.fontFamily}`,a.fillStyle=l.axesColor,l.xAxisLabelEnable){const e=l.xAxisLabelXOffset*x,n=l.xAxisLabelYOffset*x,c=l.xAxisLabelMarkOffset*x,u=l.xAxisLabelMarkSize*x,m=l.xAxisLabelSpacing*x,v=m/2;let g=[],A=!1,L=!1;for(let t=b;t<=o;t+=f[0]){const i=t-d[0],o=Math.round(i/f[0]),c=o*p[0]*y[0],x=l.xAxisLabelFormat(c),u=a.measureText(x),h={i:o,gridX:t,text:x,textMetrics:u,x:t-u.width/2+e,y:d[1]+s+n};g.push(h),h.y-s-n<0&&(A=!0),h.y+n>r&&(L=!0)}for(let e=0,i=g.length;e<i;e++){const i=g[e];t=i.y,l.xAxisLabelDynamicPosition&&(t=A?s+n:L?r-n:t);const a=new DOMRect(i.x-v,t-s,i.textMetrics.width+m,s);i.y=t,i.boundingRect=a}let E=l.xAxisLabelJoiningStep,S=g;for(;h(g);)g=S.filter((e=>i(Math.abs(e.i)%E))),E+=l.xAxisLabelJoiningStep;for(let e=0,t=g.length;e<t;e++){const t=g[e];(l.xAxisLabelDisplayZero||0!==t.i)&&(a.fillRect(t.gridX,d[1]+c,x,u),a.fillText(t.text,t.x,t.y))}}if(l.yAxisLabelEnable){const t=l.yAxisLabelXOffset*x,n=l.yAxisLabelYOffset*x,c=l.yAxisLabelMarkOffset*x,u=l.yAxisLabelMarkSize*x,m=l.yAxisLabelSpacing*x,b=m/2;let g=[],A=0,L=!1,E=!1;for(let e=v;e<=r;e+=f[1]){const i=d[1]-e,r=Math.round(i/f[1]),c=r*p[1]*y[1],x=l.yAxisLabelFormat(c),u=a.measureText(x),h={i:r,gridY:e,text:x,textMetrics:u,x:d[0]-u.width+t,y:e+s/2+n};g.push(h),A<u.width&&(A=u.width),h.x+t<0&&(L=!0),h.x+h.textMetrics.width-t>o&&(E=!0)}for(let i=0,n=g.length;i<n;i++){const n=g[i];e=n.x,l.yAxisLabelDynamicPosition&&(e=L?A-n.textMetrics.width-t:E?o-n.textMetrics.width+t:e);const a=new DOMRect(e,n.y-s-b,n.textMetrics.width,s+m);n.x=e,n.boundingRect=a}let S=l.yAxisLabelJoiningStep,M=g;for(;h(g);)g=M.filter((e=>i(Math.abs(e.i)%S))),S+=l.yAxisLabelJoiningStep;g=g.filter((e=>e.boundingRect.bottom>0&&e.boundingRect.top<r)),A=0,L=!1,E=!1;for(let e=0,i=g.length;e<i;e++){const i=g[e];i.x=d[0]-i.textMetrics.width+t,A<i.textMetrics.width&&(A=i.textMetrics.width),i.x+t<0&&(L=!0),i.x+i.textMetrics.width-t>o&&(E=!0)}for(let i=0,s=g.length;i<s;i++){const s=g[i];e=s.x,l.yAxisLabelDynamicPosition&&(e=L?A-s.textMetrics.width-t:E?o-s.textMetrics.width+t:e),s.x=e}for(let e=0,t=g.length;e<t;e++){const t=g[e];(l.yAxisLabelDisplayZero||0!==t.i)&&(a.fillRect(d[0]+c,t.gridY,u,x),a.fillText(t.text,t.x,t.y))}}}}},f=class{constructor(e={}){if(!("lineColor"in e)){const t=()=>Math.round(256*Math.random());e.lineColor=`rgb(${t()},${t()},${t()})`}"isStepped"in e||(e.isStepped=!1),"lineWidth"in e||(e.lineWidth=1),this.options=e,this.points=[]}getBoundingRect(){let e=null,t=null,i=null,s=null;for(let n=0,l=this.points,a=l.length;n<a;n++){const[a,o]=l[n];(null===e||e>a)&&(e=a),(null===t||t<a)&&(t=a),(null===i||i>o)&&(i=o),(null===s||s<o)&&(s=o)}const n=new DOMRect(e,i,t-e,s-i);return n.minX=e,n.minY=i,n.maxX=t,n.maxY=s,n}};var y=t.k,p=t.q;export{y as Chart,p as Dataset};