var t={d:(e,i)=>{for(var o in i)t.o(i,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:i[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};function i(t,e=.001){return Math.abs(t)<e}function o(t=0,e=0){return[t,e]}function n(t,e){return t[0]=e[0],t[1]=e[1],t}function s(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function l(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function r(t,e,i,o){return t[0]=e[0]*i[0]+o[0],t[1]=e[1]*i[1]+o[1],t}t.d(e,{k:()=>L,q:()=>S});const a=t=>{t.preventDefault(),t.stopPropagation(),console.log("drop",t.type)},f="sim:pointerdown",c="sim:pointermove",h="sim:pointerup",u="sim:pointerzoom",d={listenerElement:null,invertMouseWheel:!1,mouseWheelStep:.1};class x{constructor(t,e={}){const i={...d,...e};this.element=t,this.listenerElement=null!==i.listenerElement?i.listenerElement:t;const o=(t,e)=>this.element.dispatchEvent(new CustomEvent(t,{detail:e})),n=(t,e,i)=>o(f,{originalEvent:t,clientX:e,clientY:i}),s=(t,e,i)=>o(h,{originalEvent:t,clientX:e,clientY:i}),l=(t,e,i,n)=>o(u,{originalEvent:t,clientX:e,clientY:i,deltaScale:n}),r=(t,e,i,n,s)=>o(c,{originalEvent:t,clientX:e,clientY:i,movementX:n,movementY:s});let a=null,x=null;const g={x:0,y:0},p={x:0,y:0},m=i.invertMouseWheel?-1:1,b=i.mouseWheelStep;this.listeners={touchstart:t=>{let e;const i=t.target.getBoundingClientRect();if(null!==a){const o=t.changedTouches[0];if(o.identifier!==a){let l;x=o.identifier,p.x=o.clientX-i.left,p.y=o.clientY-i.top,l=s(t,g.x,g.y),!1===l&&(e=!1),l=n(t,g.x+(p.x-g.x)/2,g.y+(p.y-g.y)/2),!1===l&&(e=!1)}}else{const o=t.changedTouches[0];let s;a=o.identifier,g.x=o.clientX-i.left,g.y=o.clientY-i.top,s=n(t,g.x,g.y),!1===s&&(e=!1)}return!1===e&&(t.stopPropagation(),t.preventDefault()),e},touchend:t=>{let e,i=Array.from(t.changedTouches);if(null!==a&&null!==x){const o=i.find((t=>a===t.identifier)),l=i.find((t=>x===t.identifier));let r;r=s(t,g.x+(p.x-g.x)/2,g.y+(p.y-g.y)/2),!1===r&&(e=!1),o&&l?(a=null,x=null):o&&!l?(a=x,g.x=p.x,g.y=p.y,x=null):!o&&l&&(x=null),null!==a&&(r=n(t,g.x,g.y),!1===r&&(e=!1))}else if(null!==a&&i.find((t=>a===t.identifier))){let i;a=null,i=s(t,g.x,g.y),!1===i&&(e=!1)}return!1===e&&(t.stopPropagation(),t.preventDefault()),e},touchmove:t=>{let e;const i=t.target.getBoundingClientRect();if(null!==a&&null!==x){const o={x:g.x,y:g.y},f={x:p.x,y:p.y},c=Array.from(t.changedTouches).find((t=>a===t.identifier)),h=Array.from(t.changedTouches).find((t=>x===t.identifier));c&&(o.x=c.clientX-i.left,o.y=c.clientY-i.top),h&&(f.x=h.clientX-i.left,f.y=h.clientY-i.top);const u=p.x-g.x,d=p.y-g.y,m=f.x-o.x,b=f.y-o.y,y=1-Math.hypot(u,d)/Math.hypot(m,b),v={x:g.x+u/2,y:g.y+d/2},M={x:o.x+m/2,y:o.y+b/2};let L;L=r(t,M.x,M.y,M.x-v.x,M.y-v.y),!1===L&&(e=!1),L=s(t,M.x,M.y),!1===L&&(e=!1),L=l(t,M.x,M.y,y),!1===L&&(e=!1),L=n(t,M.x,M.y),!1===L&&(e=!1),g.x=o.x,g.y=o.y,p.x=f.x,p.y=f.y}else if(null!==a){const o={x:g.x,y:g.y},n=Array.from(t.changedTouches).find((t=>a===t.identifier));if(!n)return;let s;o.x=n.clientX-i.left,o.y=n.clientY-i.top,s=r(t,o.x,o.y,o.x-g.x,o.y-g.y),!1===s&&(e=!1),g.x=o.x,g.y=o.y}return!1===e&&(t.stopPropagation(),t.preventDefault()),e},mousedown:t=>{g.x=t.clientX,g.y=t.clientY;let e=n(t,g.x,g.y);return!1===e&&(t.stopPropagation(),t.preventDefault()),e},mouseup:t=>{g.x=t.clientX,g.y=t.clientY;let e=s(t,g.x,g.y);return!1===e&&(t.stopPropagation(),t.preventDefault()),e},mousemove:t=>{let e={x:t.clientX,y:t.clientY},i=r(t,e.x,e.y,e.x-g.x,e.y-g.y);return g.x=e.x,g.y=e.y,!1===i&&(t.stopPropagation(),t.preventDefault()),i},wheel:t=>{const e=b*(t.deltaY>0?1:-1)*m,i=l(t,t.clientX,t.clientY,e);return!1===i&&(t.stopPropagation(),t.preventDefault()),i}}}enableNativeGestures(){document.removeEventListener("gesturestart",a),document.removeEventListener("gesturechange",a),document.removeEventListener("gestureend",a)}disableNativeGestures(){document.addEventListener("gesturestart",a),document.addEventListener("gesturechange",a),document.addEventListener("gestureend",a)}enableTouchGestures(){this.listenerElement.addEventListener("touchstart",this.listeners.touchstart),document.addEventListener("touchend",this.listeners.touchend),document.addEventListener("touchmove",this.listeners.touchmove)}disableTouchGestures(){this.listenerElement.removeEventListener("touchstart",this.listeners.touchstart),document.removeEventListener("touchend",this.listeners.touchend),document.removeEventListener("touchmove",this.listeners.touchmove)}enableMouseGestures(){this.listenerElement.addEventListener("mousedown",this.listeners.mousedown),document.addEventListener("mouseup",this.listeners.mouseup),document.addEventListener("mousemove",this.listeners.mousemove),this.listenerElement.addEventListener("wheel",this.listeners.wheel),document.addEventListener("mouseleave",this.listeners.mouseup)}disableMouseGestures(){this.listenerElement.removeEventListener("mousedown",this.listeners.mousedown),document.removeEventListener("mouseup",this.listeners.mouseup),document.removeEventListener("mousemove",this.listeners.mousemove),document.removeEventListener("wheel",this.listeners.wheel),document.removeEventListener("mouseleave",this.listeners.mouseup)}}x.EVT_NAME_POINTERDOWN=f,x.EVT_NAME_POINTERMOVE=c,x.EVT_NAME_POINTERUP=h,x.EVT_NAME_POINTERZOOM=u;const g=x;function p(t,e){const i={...t,...e};return Object.entries(e).forEach((({0:e,1:o})=>{e in t&&"object"==typeof o&&!(t=>t instanceof Array)(o)&&null!==o&&(i[e]=p(t[e],o))})),i}const m={focus:{points:{innerRadius:t=>2*t.options.lineWidth,outerRadius:t=>2*t.options.lineWidth+t.options.lineWidth},axes:{x:{color:"rgba(0,0,0,0.1)",lineWidth:1},y:{color:"rgba(0,0,0,0.1)",lineWidth:1}}},color:{border:"rgba(0,0,0,0)",background:"#000000",text:"#ffffff"},shadow:{offsetX:0,offsetY:15,blur:5,color:"rgba(0,0,0,0.2)"},borderRadius:{leftTop:5,rightTop:5,leftBottom:5,rightBottom:5},viewportPadding:{left:15,right:15,top:15,bottom:15},padding:{left:25,right:10,top:5,bottom:5},mark:{offsetLeft:15,offsetTop:15,innerRadius:0,outerRadius:3},splitter:{height:5},unitInvisibleHints:!0,maxNumIterations:20},b={color:{border:"#eeeeee",background:"#ffffff",text:"#000000"},padding:{left:5,right:5,top:5,bottom:5},itemPadding:{left:25,right:10,top:5,bottom:5},mark:{offsetLeft:15,offsetTop:15,innerRadius:0,outerRadius:3}};function y(t,e){return t.bottom>e.top&&t.right>e.left&&t.top<e.bottom&&t.left<e.right}function v(t){const e=t.length;for(let i=0;i<e;i++)for(let o=0;o<e;o++)if(i!==o&&y(t[i].boundingRect,t[o].boundingRect))return!0;return!1}const M={xCanvasStep:25,yCanvasStep:25,xAxisStep:1,yAxisStep:1,xOffset:0,yOffset:0,xScale:1,yScale:1,xAxisSubdivisions:10,yAxisSubdivisions:10,lineWidth:1,pointSize:0,fontSize:15,fontFamily:"monospace",xAxisLabelXOffset:0,xAxisLabelYOffset:0,xAxisLabelDynamicPosition:!0,xAxisLabelSpacing:15,xAxisLabelFormat:t=>t.toFixed(4),xAxisLabelJoiningStep:5,xAxisLabelMarkOffset:-2,xAxisLabelMarkSize:4,xAxisLabelDisplayZero:!0,xAxisLabelEnable:!0,yAxisLabelXOffset:0,yAxisLabelYOffset:0,yAxisLabelDynamicPosition:!0,yAxisLabelSpacing:0,yAxisLabelFormat:t=>t.toFixed(4),yAxisLabelJoiningStep:5,yAxisLabelMarkOffset:-2,yAxisLabelMarkSize:4,yAxisLabelDisplayZero:!0,yAxisLabelEnable:!0,backgroundColor:"#ffffff",gridColor:"rgba(0,0,0,0.1)",axesColor:"rgba(0,0,0,0.5)",userTranslateX:!0,userTranslateY:!0,userScaleX:!0,userScaleY:!0,canvasRatio:1,canvasPixelRatio:1,clearFrame:!1,hints:{settings:{focus:{points:{innerRadius:t=>2*t.options.lineWidth,outerRadius:t=>2*t.options.lineWidth+t.options.lineWidth},axes:{x:{color:"rgba(0,0,0,0.1)",lineWidth:1},y:{color:"rgba(0,0,0,0.1)",lineWidth:1}}},color:{border:"rgba(0,0,0,0)",background:"#000000",text:"#ffffff"},shadow:{offsetX:0,offsetY:15,blur:5,color:"rgba(0,0,0,0.2)"},borderRadius:{leftTop:5,rightTop:5,leftBottom:5,rightBottom:5},viewportPadding:{left:15,right:15,top:15,bottom:15},padding:{left:25,right:10,top:5,bottom:5},mark:{offsetLeft:15,offsetTop:15,innerRadius:0,outerRadius:3},splitter:{height:5},unitInvisibleHints:!0,maxNumIterations:20},hintText:(t,e,i,o)=>`X: ${o.xAxisLabelFormat(t)}\nY: ${o.yAxisLabelFormat(e)}`,createHints:function(t,e,i,n,s,l){const{fontFamily:r,fontSize:a}=s,{hintText:f,settings:c}=s.hints,h=p(m,c),{focus:u,borderRadius:d,padding:x,mark:g,splitter:b}=h,{innerRadius:y,outerRadius:v}=u.points,M=o(),{transform:L}=l,R=[],S=i.pixelRatio,P={...g};P.offsetLeft*=S,P.offsetTop*=S,P.innerRadius*=S,P.outerRadius*=S;const w={...x};w.left*=S,w.top*=S,w.right*=S,w.bottom*=S;const A={...b};A.height*=S;const E=a*S;t.font=`${E}px/1 ${r}`;for(let e=0,i=n.length;e<i;e++){const i=n[e],o=i.focusPoint;if(o){L(M,o);const e=f(o[0],o[1],i,s).split("\n");let n=0,l=0,r=0;for(let i=0,o=e.length;i<o;i++){const o=t.measureText(e[i]),s=o.width;n<s&&(n=s),l+=E;const a=-Math.abs(o.actualBoundingBoxAscent);r=E-(Math.abs(o.actualBoundingBoxDescent)-a)}l+=w.top+w.bottom+r,n+=w.left+w.right;const a=M[0]+20,c=M[1]-l/2;R.push({focusPoints:[{x:M[0],y:M[1],innerRadius:y(i)*S,outerRadius:v(i)*S,dataset:i}],left:a,top:c,right:a+n,bottom:c+l,correction:r,texts:[{offsetLeft:w.left,offsetTop:w.top,contents:e}],padding:w,marks:[{...P,dataset:i}]})}}return L(M,e),{ctx:t,focus:{origin:e,x:M[0],y:M[1]},viewport:{...i,backgroundColor:s.backgroundColor},settings:p(h,{font:{family:r,size:E},borderRadius:d?[Math.round(d.leftTop*S),Math.round(d.rightTop*S),Math.round(d.rightBottom*S),Math.round(d.leftBottom*S)]:null,splitter:A}),helpers:l,list:R}},displaceHints:t=>{const{list:e,settings:i,viewport:{width:o,height:n,pixelRatio:s},helpers:{isIntersects:l}}=t,{viewportPadding:r,splitter:{height:a}}=i,f=r.left*s,c=o-r.right*s,h=r.top*s,u=n-r.bottom*s;let d=[...e].sort(((t,e)=>t.focusPoints[t.focusPoints.length-1].y-e.focusPoints[0].y)),x=!0,g=0;for(;x;){g++,x=!1;for(let t=0,e=d.length;t<e;t++){const i=d[t];if(null!==i){for(let o=t+1;o<e;o++){const t=d[o];if(null!==t&&l(i,t)){const e=i.bottom-i.top-i.padding.bottom-t.padding.top-i.correction+a;for(let i=0,o=t.texts.length;i<o;i++)t.texts[i].offsetTop+=e;for(let i=0,o=t.marks.length;i<o;i++)t.marks[i].offsetTop+=e;i.right=Math.max(i.right,i.left+(t.right-t.left)),i.bottom+=t.bottom-t.top-i.padding.bottom-t.padding.top-i.correction+a,i.texts=i.texts.concat(t.texts),i.focusPoints=i.focusPoints.concat(t.focusPoints),i.marks=i.marks.concat(t.marks),d[o]=null,x=!0}}d[t]=i}}if(!i.unitInvisibleHints)for(let t=0,e=d.length;t<e;t++){const e=d[t];null!==e&&(e.right<f||e.left>c||e.bottom<h||e.top>u)&&(d[t]=null,x=!0)}d=d.filter((t=>t));for(let t=0,e=d.length;t<e;t++){const e=d[t];if(e.left<f){const t=f-e.left;e.left+=t,e.right+=t,x=!0}else if(e.right>c){const t=e.right-c;e.left-=t,e.right-=t,x=!0}if(e.top<h){const t=h-e.top;e.top+=t,e.bottom+=t,x=!0}else if(e.bottom>u){const t=e.bottom-u;e.top-=t,e.bottom-=t,x=!0}}if(d.length<=1||g>=i.maxNumIterations)break}return{...t,list:d}},renderHints:t=>{const{ctx:e,list:i,settings:{font:o,color:n,shadow:s,borderRadius:l,focus:{axes:r}},viewport:{width:a,height:f,pixelRatio:c,backgroundColor:h}}=t;for(let t=0,e=i.length;t<e;t++){const e=i[t],{left:o,top:n,right:s,bottom:l}=e;e.rect={left:Math.round(o),top:Math.round(n),width:Math.round(s-o),height:Math.round(l-n)}}if(r.y){const{color:t,lineWidth:o}=r.y;e.fillStyle=t;for(let t=0,n=i.length;t<n;t++){const{focusPoints:n}=i[t];for(let t=0,i=n.length;t<i;t++){const{y:i}=n[t];e.fillRect(0,i,a,Math.round(o*c))}}}if(r.x){const{color:i,lineWidth:o}=r.x;e.fillStyle=i,e.fillRect(t.focus.x,0,Math.round(o*c),f)}if(s){const{offsetX:t,offsetY:o,blur:n,color:r}=s;e.fillStyle="rgb(255,255,255)",e.shadowColor=r,e.shadowOffsetX=t,e.shadowOffsetY=o,e.shadowBlur=n;for(let t=0,o=i.length;t<o;t++){const{left:o,top:n,width:s,height:r}=i[t].rect;l?(e.beginPath(),e.roundRect(o,n,s,r,l),e.fill()):e.fillRect(o,n,s,r)}e.shadowColor="transparent"}for(let t=0,o=i.length;t<o;t++){const{focusPoints:o}=i[t];for(let t=0,i=o.length;t<i;t++){const{x:i,y:n,innerRadius:s,outerRadius:l,dataset:{options:{lineColor:r}}}=o[t],a=Math.round(i),f=Math.round(n);e.fillStyle=r.toString(),e.beginPath(),e.arc(a,f,Math.round(l),0,2*Math.PI,!1),e.fill(),e.fillStyle=h,e.beginPath(),e.arc(a,f,Math.round(s),0,2*Math.PI,!1),e.fill()}}const{border:u,background:d,text:x}=n,g=o.size;e.font=`${Math.round(g)}px/1 ${o.family}`;for(let t=0,o=i.length;t<o;t++){const{rect:{left:o,top:n,width:s,height:r},texts:a,marks:f}=i[t];e.strokeStyle=u,e.fillStyle=d,l?(e.beginPath(),e.roundRect(o,n,s,r,l),e.fill(),e.stroke()):e.fillRect(o,n,s,r),e.fillStyle=x;for(let t=0,i=a.length;t<i;t++){const{offsetLeft:i,offsetTop:s,contents:l}=a[t],r=Math.round(i+o);let f=s+n;for(let t=0,i=l.length;t<i;t++)e.fillText(l[t],r,Math.round(f+g)),f+=g}for(let t=0,i=f.length;t<i;t++){const{offsetLeft:i,offsetTop:s,innerRadius:l,outerRadius:r,dataset:{options:{lineColor:a}}}=f[t],c=Math.round(i+o),u=Math.round(s+n);e.fillStyle=a.toString(),e.beginPath(),e.arc(c,u,r,0,2*Math.PI,!1),e.fill(),e.fillStyle=h,e.beginPath(),e.arc(c,u,l,0,2*Math.PI,!1),e.fill()}}}},legends:{settings:{color:{border:"#eeeeee",background:"#ffffff",text:"#000000"},padding:{left:5,right:5,top:5,bottom:5},itemPadding:{left:25,right:10,top:5,bottom:5},mark:{offsetLeft:15,offsetTop:15,innerRadius:0,outerRadius:3}},legendText:(t,e)=>`${t.legend}`,createLegends:function(t,e,i,o){const{legendText:n,settings:s}=o.legends,l=p(b,s),{itemPadding:r,padding:a,mark:f}=l,{fontFamily:c,fontSize:h}=o;let u=[],d=0,x=0;const g=e.pixelRatio,m=h*g,y={...f};y.offsetLeft*=g,y.offsetTop*=g,y.innerRadius*=g,y.outerRadius*=g;const v={...a};v.left*=g,v.top*=g,v.right*=g,v.bottom*=g;const M={...r};M.left*=g,M.top*=g,M.right*=g,M.bottom*=g,t.font=`${m}px/1 ${c}`;for(let e=0,s=i.length;e<s;e++){const s=i[e],l=n(s,o);if(l){const e=t.measureText(l),i=e.width+M.left+M.right*g,o=-Math.abs(e.actualBoundingBoxAscent),n=Math.abs(e.actualBoundingBoxDescent);x=Math.max(x,m-(n-o)),u.push({text:{content:l,offsetLeft:M.left,offsetTop:M.top},mark:y,dataset:s,width:i,left:0,top:0}),d<i&&(d=i)}}const L=e.width-v.left-v.right,R=Math.floor(L/d);let S=0,P=0;const w=m+M.top+M.bottom+x;for(let t=0,e=u.length;t<e;t++){const e=u[t],i=t%R,o=Math.floor(t/R);S<i&&(S=i),P<o&&(P=o),e.left=i*d,e.top=o*w}const A=(P+1)*w+v.top+v.bottom,E=v.left+(L-(S+1)*d)/2,T=e.height-A+v.top;for(let t=0,e=u.length;t<e;t++){const e=u[t];e.left+=E,e.top+=T}return e.clip(0,0,e.width,e.height-A),{ctx:t,area:{left:0,right:e.width,top:e.height-A,bottom:e.height},viewport:{...e,backgroundColor:o.backgroundColor},settings:p(l,{font:{family:c,size:m}}),list:u}},renderLegends:function(t){const{ctx:e,area:i,settings:{font:o,color:n},viewport:{pixelRatio:s,backgroundColor:l},list:r}=t;if(n.background){const t=Math.round(i.left),o=Math.round(i.top),l=Math.round(i.right),r=Math.round(i.bottom);e.fillStyle=n.background,e.fillRect(t,o,l-t,r-o),n.border&&(e.fillStyle=n.border,e.fillRect(t,o,l-t,Math.round(1*s)))}const a=o.size;e.font=`${Math.round(a)}px/1 ${o.family}`;for(let t=0,i=r.length;t<i;t++){let{left:i,top:s,text:a,mark:f,dataset:{options:{lineColor:c}}}=r[t];e.fillStyle=n.text;{let{offsetLeft:t,offsetTop:n,content:l}=a;t+=i,n+=s,e.fillText(l,Math.round(t),Math.round(n+o.size))}{const{offsetLeft:t,offsetTop:o,innerRadius:n,outerRadius:r}=f,a=Math.round(t+i),h=Math.round(o+s);e.fillStyle=c.toString(),e.beginPath(),e.arc(a,h,Math.round(r),0,2*Math.PI,!1),e.fill(),e.fillStyle=l,e.beginPath(),e.arc(a,h,Math.round(n),0,2*Math.PI,!1),e.fill()}}}},cursorPointer:"pointer",cursorGrabbing:"grabbing",bindEventHandlers:!0,invertMouseWheel:!1,mouseWheelStep:.1},L=class{constructor(t,e={}){this.options=e=p(M,e),this.elCanvas=t,this.ctx=t.getContext("2d"),this.scale=o(e.xScale,e.yScale),this.translate=o(e.xOffset,e.yOffset),this.focusPoint=o(0,0),this.datasets=[],t.style.cursor=e.cursorPointer;const i={down:!1,pt0:o(0,0),pt:o(0,0),delta:o(0,0)},r=(i,o)=>{const{clientX:n,clientY:s}=o,{left:l,right:r,top:a,bottom:f}=t.getBoundingClientRect();return i[0]=(n-l)/e.canvasRatio,i[1]=(s-a)/e.canvasRatio,l<=n&&n<=r&&a<=s&&s<=f};this.isListening=!1,this.listeners={},this.listeners[g.EVT_NAME_POINTERDOWN]=o=>{t.style.cursor=e.cursorGrabbing,o.detail.originalEvent.preventDefault(),i.down=!0,r(i.pt0,o.detail)},this.listeners[g.EVT_NAME_POINTERUP]=o=>{i.down=!1,t.style.cursor=e.cursorPointer},this.listeners[g.EVT_NAME_POINTERMOVE]=t=>{const a=r(i.pt,t.detail);if(i.down){f=i.delta,c=i.pt,h=i.pt0,f[0]=c[0]-h[0],f[1]=c[1]-h[1],n(i.pt0,i.pt);const t=o(e.userTranslateX?i.delta[0]:0,e.userTranslateY?i.delta[1]:0);this.move(t),this.repaint()}else if(a){const t=o();!function(t,e,i,o){t[0]=(e[0]-o[0])/i[0],t[1]=(e[1]-o[1])/i[1]}(t,i.pt,o(e.xCanvasStep,e.yCanvasStep),this.translate),t[1]=-t[1],s(t,t,o(e.xAxisStep,e.yAxisStep)),l(t,t,this.scale),this.computeFocusPoints(t),this.repaint()}var f,c,h},this.listeners[g.EVT_NAME_POINTERZOOM]=t=>{t.detail.originalEvent.preventDefault();const n=t.detail.deltaScale,s=o(!0===e.userScaleX||"function"==typeof e.userScaleX&&e.userScaleX(t)?n:0,!0===e.userScaleY||"function"==typeof e.userScaleY&&e.userScaleY(t)?n:0);r(i.pt,t.detail),this.zoomAroundPoint(s,i.pt),this.repaint()},this.touchGestures=new g(t,{invertMouseWheel:e.invertMouseWheel,mouseWheelStep:e.mouseWheelStep}),e.bindEventHandlers&&this.bind()}computeFocusPoints(t){this.datasets.forEach((e=>{const{extract:i,size:n}=e,s=((t,e,o,n)=>{let s=-1;for(;e<=o;){let t=e+Math.floor((o-e+1)/2),l=i(t)[0];l<n?(s=t,e=t+1):(l>n||l===n)&&(o=t-1)}return s})(0,0,n-1,t[0]),l=s+1;if(s>=0&&l<n){const n=o(),r=i(s),a=i(l),f=(t[0]-r[0])/(a[0]-r[0]);!function(t,e,i,o){t[0]=e[0]+o[0]*(i[0]-e[0]),t[1]=e[1]+o[1]*(i[1]-e[1])}(n,r,a,o(f,e.options.isStepped?0:f)),e.focusPoint=n}else e.focusPoint=null})),n(this.focusPoint,t)}bind(){if(!this.isListening){for(let t in this.listeners)this.elCanvas.addEventListener(t,this.listeners[t]);this.touchGestures.enableTouchGestures(),this.touchGestures.enableMouseGestures(),this.isListening=!0}}unbind(){if(this.isListening){for(let t in this.listeners)this.elCanvas.removeEventListener(t,this.listeners[t]);this.touchGestures.disableTouchGestures(),this.touchGestures.disableMouseGestures(),this.isListening=!1}}fitView(t,e=!0){let i=this.elCanvas.width,n=this.elCanvas.height;if(i<=0||n<=0||Math.abs(t.width)<=0||Math.abs(t.height)<=0)return!1;const s=new DOMRect(t.x,-t.y-t.height,t.width,t.height),l=this.options,r=l.canvasRatio*l.canvasPixelRatio,a=o(l.xCanvasStep,l.yCanvasStep),f=o(l.xAxisStep,l.yAxisStep);if(i=i/r/a[0]*f[0],n=n/r/a[1]*f[1],this.scale[0]=i/s.width,this.scale[1]=n/s.height,e&&(this.scale[1]>this.scale[0]?this.scale[1]=this.scale[0]:this.scale[0]=this.scale[1]),this.translate[0]=-s.x/f[0]*a[0]*this.scale[0],this.translate[1]=-s.y/f[1]*a[1]*this.scale[1],e){const t=(i/this.scale[0]-s.width)/2,e=(n/this.scale[1]-s.height)/2;this.translate[0]+=t*a[0]*this.scale[0]/f[0],this.translate[1]+=e*a[1]*this.scale[1]/f[1]}return!0}fitViewAuto(t=!0){this.fitView(this.getBoundingRect(null,0,null,0),t),this.repaint()}getBoundingRect(t=null,e=null,i=null,o=null){let n=t,s=i,l=e,r=o;for(let t=0,e=this.datasets.length;t<e;t++)for(let e=0,i=this.datasets[t].points,o=i.length;e<o;e++){const[t,o]=i[e];(null===n||n>t)&&(n=t),(null===s||s<t)&&(s=t),(null===l||l>o)&&(l=o),(null===r||r<o)&&(r=o)}const a=new DOMRect(n,l,s-n,r-l);return a.minX=n,a.minY=l,a.maxX=s,a.maxY=r,a}move(t){var e,i,o;e=this.translate,i=this.translate,o=t,e[0]=i[0]+o[0],e[1]=i[1]+o[1]}zoomAroundPoint(t,e){const i=this.translate,o=this.scale;!function(t,e,i,o){t[0]=e[0]-o[0]*(i[0]-e[0]),t[1]=e[1]-o[1]*(i[1]-e[1])}(i,i,e,t),r(o,o,t,o)}repaint(){let t,e;const n=this.options,a=this.ctx;let f=this.elCanvas.width,c=this.elCanvas.height;const h=this.scale,u=this.datasets;if(f<=0||c<=0||0===h[0]||0===h[1])return;const d=n.canvasRatio*n.canvasPixelRatio,x=o(n.xCanvasStep*d,n.yCanvasStep*d),g=o(this.translate[0]*d,this.translate[1]*d),p=o(x[0]*h[0],x[1]*h[1]),m=o(n.xAxisStep,n.yAxisStep),b=o(1,1),M=o(n.xAxisSubdivisions,n.yAxisSubdivisions);for(;p[0]>x[0]*M[0];)p[0]/=M[0],b[0]/=M[0];for(;p[1]>x[1]*M[1];)p[1]/=M[1],b[1]/=M[1];for(;p[0]<x[0];)p[0]*=M[0],b[0]*=M[0];for(;p[1]<x[1];)p[1]*=M[1],b[1]*=M[1];const L=g[0]-(Math.floor(g[0]/p[0])+(g[0]>0?1:0))*p[0],R=g[1]-(Math.floor(g[1]/p[1])+(g[1]>0?1:0))*p[1],S=(t,e)=>{s(t,e,x),l(t,t,m),t[1]=-t[1],r(t,t,h,g)};o(),n.clearFrame&&a.clearRect(0,0,f,c),a.fillStyle=n.backgroundColor,a.fillRect(0,0,f,c);let P=null;if(n.legends){const{createLegends:t,renderLegends:e}=n.legends;e(t(a,{width:f,height:c,pixelRatio:d,clip(t,e,i,o){f=i-t,c=o-e,P=new Path2D,P.rect(t,e,f,c)}},u,n,{isIntersects:y}))}P&&(a.save(),a.clip(P)),a.fillStyle=n.gridColor;for(let t=L;t<=f;t+=p[0])a.fillRect(t,0,1*d,c);for(let t=R;t<=c;t+=p[1])a.fillRect(0,t,f,1*d);a.fillStyle=n.axesColor,a.fillRect(g[0],0,1*d,c),a.fillRect(0,g[1],f,1*d);for(let t=0,e=u.length;t<e;t++){const e=u[t],{extract:i,size:n,tree:s}=e;if(n>1){a.strokeStyle=e.options.lineColor,a.lineWidth=e.options.lineWidth*d;const t=o(),n=o(),l=(e,i,o)=>{if(S(n,[i.maxX,i.maxY]),n[0]<0)return;if(S(t,[i.minX,i.minY]),t[0]>f)return;const s=Math.round(t[0]),r=Math.round(n[0]);if(s===r)e.beginPath(),e.moveTo(s,t[1]),e.lineTo(r,n[1]),e.stroke();else if(i.left&&i.right)l(e,i.left,o),l(e,i.right,o);else{e.beginPath(),S(t,o(i.s)),e.moveTo(t[0],t[1]);for(let n=i.s+1;n<=i.e;n++)S(t,o(n)),e.lineTo(t[0],t[1]);e.stroke()}},r=(e,i,o)=>{if(S(n,[i.maxX,i.maxY]),n[0]<0)return;if(S(t,[i.minX,i.minY]),t[0]>f)return;const s=Math.round(t[0]),l=Math.round(n[0]);if(s===l)e.beginPath(),e.moveTo(s,t[1]),e.lineTo(l,n[1]),e.stroke();else if(i.left&&i.right)r(e,i.left,o),r(e,i.right,o);else{e.beginPath(),S(t,o(i.s)),e.moveTo(t[0],t[1]);let n=t[1];for(let s=i.s+1;s<=i.e;s++)S(t,o(s)),e.lineTo(t[0],n),e.lineTo(t[0],t[1]),n=t[1];e.stroke()}},c=2*Math.PI,h=(e,i,o,s)=>{if(S(n,[i.maxX,i.maxY]),n[0]<0)return;if(S(t,[i.minX,i.minY]),t[0]>f)return;const l=Math.round(t[0]),r=Math.round(n[0]);if(l===r)e.beginPath(),e.arc(l,t[1],s,0,c,!1),e.fill(),e.beginPath(),e.arc(r,n[1],s,0,c,!1),e.stroke();else if(i.left&&i.right)h(e,i.left,o,s),h(e,i.right,o,s);else{for(let n=i.s;n<=i.e;n++)S(t,o(n)),e.beginPath(),e.arc(t[0],t[1],s,0,c,!1),e.fill();e.stroke()}};e.options.isStepped?r(a,s,i):l(a,s,i);const u=e.options.pointRadius;u>0&&(a.fillStyle=e.options.lineColor,h(a,s,i,u))}}if(n.xAxisLabelEnable||n.yAxisLabelEnable){const o=n.fontSize*d;if(a.font=`${o}px/1 ${n.fontFamily}`,a.fillStyle=n.axesColor,n.xAxisLabelEnable){const t=n.xAxisLabelXOffset*d,s=n.xAxisLabelYOffset*d,l=n.xAxisLabelMarkOffset*d,r=n.xAxisLabelMarkSize*d,h=n.xAxisLabelSpacing*d,u=h/2;let x=[],y=!1,M=!1;for(let e=L;e<=f;e+=p[0]){const i=e-g[0],l=Math.round(i/p[0]),r=l*b[0]*m[0],f=n.xAxisLabelFormat(r),h=a.measureText(f),u={i:l,gridX:e,text:f,textMetrics:h,x:e-h.width/2+t,y:g[1]+o+s};x.push(u),u.y-o-s<0&&(y=!0),u.y+s>c&&(M=!0)}for(let t=0,i=x.length;t<i;t++){const i=x[t];e=i.y,n.xAxisLabelDynamicPosition&&(e=y?o+s:M?c-s:e);const l=new DOMRect(i.x-u,e-o,i.textMetrics.width+h,o);i.y=e,i.boundingRect=l}let R=n.xAxisLabelJoiningStep,S=x;for(;v(x);)x=S.filter((t=>i(Math.abs(t.i)%R))),R+=n.xAxisLabelJoiningStep;for(let t=0,e=x.length;t<e;t++){const e=x[t];(n.xAxisLabelDisplayZero||0!==e.i)&&(a.fillRect(e.gridX,g[1]+l,d,r),a.fillText(e.text,e.x,e.y))}}if(n.yAxisLabelEnable){const e=n.yAxisLabelXOffset*d,s=n.yAxisLabelYOffset*d,l=n.yAxisLabelMarkOffset*d,r=n.yAxisLabelMarkSize*d,h=n.yAxisLabelSpacing*d,u=h/2;let x=[],y=0,M=!1,L=!1;for(let t=R;t<=c;t+=p[1]){const i=g[1]-t,l=Math.round(i/p[1]),r=l*b[1]*m[1],c=n.yAxisLabelFormat(r),h=a.measureText(c),u={i:l,gridY:t,text:c,textMetrics:h,x:g[0]-h.width+e,y:t+o/2+s};x.push(u),y<h.width&&(y=h.width),u.x+e<0&&(M=!0),u.x+u.textMetrics.width-e>f&&(L=!0)}for(let i=0,s=x.length;i<s;i++){const s=x[i];t=s.x,n.yAxisLabelDynamicPosition&&(t=M?y-s.textMetrics.width-e:L?f-s.textMetrics.width+e:t);const l=new DOMRect(t,s.y-o-u,s.textMetrics.width,o+h);s.x=t,s.boundingRect=l}let S=n.yAxisLabelJoiningStep,P=x;for(;v(x);)x=P.filter((t=>i(Math.abs(t.i)%S))),S+=n.yAxisLabelJoiningStep;x=x.filter((t=>t.boundingRect.bottom>0&&t.boundingRect.top<c)),y=0,M=!1,L=!1;for(let t=0,i=x.length;t<i;t++){const i=x[t];i.x=g[0]-i.textMetrics.width+e,y<i.textMetrics.width&&(y=i.textMetrics.width),i.x+e<0&&(M=!0),i.x+i.textMetrics.width-e>f&&(L=!0)}for(let i=0,o=x.length;i<o;i++){const o=x[i];t=o.x,n.yAxisLabelDynamicPosition&&(t=M?y-o.textMetrics.width-e:L?f-o.textMetrics.width+e:t),o.x=t}for(let t=0,e=x.length;t<e;t++){const e=x[t];(n.yAxisLabelDisplayZero||0!==e.i)&&(a.fillRect(g[0]+l,e.gridY,r,d),a.fillText(e.text,e.x,e.y))}}}if(n.hints){const{createHints:t,displaceHints:e,renderHints:i}=n.hints;let o=t(a,this.focusPoint,{width:f,height:c,pixelRatio:d},u,n,{transform:S,isIntersects:y});o=e(o),i(o)}P&&a.restore()}},R=(t,e,i,o)=>{const n=i-e<=o;let s,l,[r,a]=t(e),[f,c]=t(i);if(n)for(let o=e;o<=i;o++){const e=t(o)[1];a>e&&(a=e),c<e&&(c=e)}else{const n=e+Math.floor((i-e)/2);s=R(t,e,n,o),l=R(t,n,i,o),a=Math.min(s.minY,l.minY),c=Math.max(s.maxY,l.maxY)}return{s:e,e:i,minX:r,minY:a,maxX:f,maxY:c,left:s,right:l}},S=class{constructor(t="",e={}){if(!("lineColor"in e)){const t=()=>Math.round(256*Math.random());e.lineColor=`rgb(${t()},${t()},${t()})`}"isStepped"in e||(e.isStepped=!1),"lineWidth"in e||(e.lineWidth=1),"pointRadius"in e||(e.pointRadius=0),this.legend=t,this.options=e}compile(t,e,i=100){this.extract=t,this.size=e,this.tree=R(t,0,e-1,i)}getBoundingRect(){let t=null,e=null,i=null,o=null;const{extract:n,size:s}=this;for(let l=0;l<s;l++){const[s,r]=n(l);(null===t||t>s)&&(t=s),(null===e||e<s)&&(e=s),(null===i||i>r)&&(i=r),(null===o||o<r)&&(o=r)}const l=new DOMRect(t,i,e-t,o-i);return l.minX=t,l.minY=i,l.maxX=e,l.maxY=o,l}};var P=e.k,w=e.q;export{P as Chart,w as Dataset};